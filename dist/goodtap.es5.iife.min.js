var goodtap=function(t){"use strict";class e{}e.ROTATION_DEGREE_PRECISION=1,e.RADIAN_FACTOR=1/360*(2*Math.PI),e.DEGREE_FACTOR=1/(2*Math.PI)*360,e.DEG360=360*e.ROTATION_DEGREE_PRECISION,e.ROTATION_LOOKUP=function(){const t=[];for(let n=0;n<360*e.ROTATION_DEGREE_PRECISION;n++)t.push([Math.cos(n*e.RADIAN_FACTOR),Math.sin(n*e.RADIAN_FACTOR)]);return t}();class n{}n.EPSILON=1e-8,n.IDENTITY={x:1,y:1},n.X_DIM={x:1,y:0},n.Y_DIM={x:0,y:1};class r{constructor(t=0,e=0){this.angle=this.horizontalAngle,this.direction=this.horizontalAngle,this.x=t,this.y=e}get isZero(){return 0===this.x&&0===this.y}create(t=0,e=0){return new this.constructor(t,e)}set(t){return this.x=t.x,this.y=t.y,this}clone(t){return t?t.set(this):this.create(this.x,this.y)}toInt(){return this.x|=0,this.y|=0,this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}toDecimal(){return this.x+=n.EPSILON,this.y+=n.EPSILON,this}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.lengthSq())}horizontalAngle(){return Math.atan2(this.y,this.x)}rotate(t){const n=function(t){const n=t*e.DEGREE_FACTOR*e.ROTATION_DEGREE_PRECISION|0;return this.rotationDeg(n/e.ROTATION_DEGREE_PRECISION)}(t),r=this.x*n[0]-this.y*n[1],i=this.x*n[1]+this.y*n[0];return this.x=r,this.y=i,this}rotateAround(t,e){return this.subtract(t).rotate(e).add(t)}normalize(){const t=this.length();return 0===t?(this.x=1,this.y=0):(this.x=this.x/t,this.y=this.y/t),this}scale(t){return this.x=this.x*t.x,this.y=this.y*t.y,this}relate(t){return this.x=this.x/t.x,this.y=this.y/t.y,this}multiply(t){return this.x=this.x*t,this.y=this.y*t,this}add(t){return this.x=this.x+t.x,this.y=this.y+t.y,this}subtract(t){return this.x=this.x-t.x,this.y=this.y-t.y,this}invert(){return this.x=-this.x,this.y=-this.y,this}equals(t){return this.x===t.x&&this.y===t.y}almostEquals(t){return Math.abs(this.x-t.x)<n.EPSILON&&Math.abs(this.y-t.y)<n.EPSILON}getNormal(t){const e=this.clone();t||e.set(this).normalize();const n=e.x;return e.x=e.y,e.y=-n,e}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}verticalAngle(){return Math.atan2(this.x,this.y)}rotateBy(t){const e=-this.horizontalAngle()+t;return this.rotate(e)}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}zero(){return this.x=0,this.y=0,this}}let i=!0;var s;"undefined"==typeof window?(s=null,i=!1):s=window;let o=new class{constructor(){this._window=s,this._nativeWindow=i}get window(){return this._window}set window(t){this._window=t,this.hasNativeWindow&&(s=t)}get hasNativeWindow(){return this._nativeWindow}};function h(){return null!==o.window}function a(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function u(t){return"[object Function]"===Object.prototype.toString.call(t)}function l(t){return void 0===t||null===t}function c(t){return void 0===t}function d(t){return!c(t)}function f(t){const e=Object.keys(t);let n=-1;const r=e.length;for(;++n<r;)delete t[e[n]]}function y(t){let e;if(t instanceof Object)if(void 0!==t.constructor.prototype.clone)e=t.clone();else if(a(t)){let n=-1;const r=t.length;for(e=new Array(r);++n<r;)e[n]=y(t[n])}else{if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);{e=new t.constructor;const n=Object.keys(t);let r=null,i=-1;const s=n.length;for(;++i<s;)e[r=n[i]]=y(t[r])}}else e=t;return e}function g(t,e,n){const r=Object.keys(e);let i,s,o=-1;const h=r.length;for(;++o<h;)s=e[i=r[o]],n&&i in n&&(i=n[i]),i in t&&(t[i]=e[r[o]])}function x(t,e=0,n=1/0){let r=Math.min(l(t)?0:t.length-e,n);r<0&&(r=0);let i=-1;const s=new Array(r);for(;++i<r;)s[i]=t[i+e];return s}function p(t,e){let n,r=l(t)?0:t.length;if(e>=0&&e<r){let i=e;for(n=t[e];++i<r;)t[i-1]=t[i];t.length-=1}return n}function _(t,e){let n=-1;const r=l(t)?0:t.length;for(;++n<r;)if(t[n]===e)return n;return-1}function v(t,e){let n=-1;const r=l(t)?0:t.length;for(;++n<r;)if(e(t[n]))return n;return-1}function m(t){let e=-1;const n=l(t)?0:t.length,r=new Array(n);for(;++e<n;)r[e]=t[e];return r}function w(t,e){let n=-1;const r=l(t)?0:t.length;for(e.length=r;++n<r;)e[n]=y(t[n])}function E(t,e){const n=[];let r=-1;const i=l(t)?0:t.length;for(;++r<i;){const i=t[r];!0===e(i,r)&&n.push(i)}return n}function I(t,e,n){let r=-1;const i=l(t)?0:t.length;for(e.length=i;++r<i;)e[r]=n(t[r],r)}function A(t,e,n=0){let r=n-1;const i=l(t)?0:t.length;for(;++r<i;)e(t[r],r)}function b(t,e,n,r){let i=c(n)||(s=n)===+s;var s;let o=c(r=i?n:r)||r<0?-1:r-1;const h=l(t)?0:t.length;for(;++o<h&&(i?!e(t[o],o):!e(t[o],o)&&(n(t[o],o),1)););}function O(t,e){(t||-1)<0&&(t=0);let n=new Array(t),r=-1;for(;++r<t;)n[r]=e(r,n);return n}h()&&!window.Symbol&&(window.Symbol={iterator:"iterator"});class T{constructor(t){this._array=[],this._index=Object.create(null),this._indexer=null,this._pointer=0,this._array=void 0===t?new Array:m(t instanceof T?t._array:t)}[Symbol.iterator](){return this}next(t){return{done:this._pointer>=this.length,value:this._pointer<this.length?this._array[this._pointer++]:void(this._pointer=0)}}create(t){return new this.constructor(t)}get values(){return this._array}get(t){return this._array[t]}getByIndex(t){return l(this._index)?void 0:this._index[t]}set(t,e){if(!(t>=0&&t<this.length))throw new Error(`index out of bounds on <List>.set(${t}, ${e.toString()})`);return this._array[0|t]=e,null!==this._indexer&&(this._index[this._indexer(e)]=e),this}get count(){return this._array.length}get length(){return this._array.length}get indexer(){return this._indexer}set indexer(t){this._indexer=t,this._reindex()}_reindex(){null===this._indexer?this._index=null:(null===this._index?this._index=Object.create(null):f(this._index),this.forEach(t=>this._index[this._indexer(t)]=t))}truncate(t=0){if(t<0){let e=this._array,n=e.length,r=n-(t=Math.min(n,-1*t))-1,i=-1;for(;++r<n;)e[++i]=e[r]}return this._array.length=Math.max(0,Math.min(this._array.length,t)),this._reindex(),this}fill(t,e){return t=Math.max(0,t||0),u(e)?this._array=O(t,e):e instanceof Object?this._array=O(t,()=>y(e)):this._array=O(t,()=>e),this._reindex(),this}clear(){return this._array.length=0,null!==this._index&&f(this._index),this}add(t){return this._array.push(t),null!==this._indexer&&(this._index[this._indexer(t)]=t),this}insertAt(t,e){return function(t,e,n){if(l(t))throw new Error("Unable to insertAt on null or undefined");if(0===e)t.unshift(n);else if(e>0){let r=t.length;for(;--r>=e;)t[r+1]=t[r];t[r+1]=n}}(this._array,t,e),null!==this._indexer&&(this._index[this._indexer(e)]=e),this}push(t){return null!==this._indexer&&(this._index[this._indexer(t)]=t),this._array.push(t)}pop(){let t=this._array.pop();return void 0!==t&&null!==this._indexer&&delete this._index[this._indexer(t)],t}shift(){let t=this._array.shift();return void 0!==t&&null!==this._indexer&&delete this._index[this._indexer(t)],t}concat(t){let e,n=t instanceof T?t.values:t;return e=function(...t){return Array.prototype.concat.apply([],t)}(this._array,n),this.create(e)}index(t){null!==this._indexer&&A(t,t=>{this._index[this._indexer(t)]=t})}unindexEl(t){null!==this._indexer&&delete this._index[this._indexer(t)]}append(t){let e=t instanceof T?t.values:t;return function(t,e){let n=-1;const r=t.length,i=l(e)?0:e.length;for(;++n<i;)t[r+n]=e[n]}(this._array,e),this.index(e),this}copy(t){let e=t instanceof T?t.values:t;return w(e,this._array),this.index(e),this}shallowCopy(t){let e=t instanceof T?t.values:t;return function(t,e){let n=-1;const r=l(t)?0:t.length;for(e.length=r;++n<r;)e[n]=t[n]}(e,this._array),this.index(e),this}clone(){const t=function(t){let e=-1;const n=l(t)?0:t.length,r=new Array(n);for(;++e<n;)r[e]=y(t[e]);return r}(this._array);let e=this.create(t);return null!==this._indexer&&(e._indexer=this._indexer,e._index=y(this._index)),e}remove(t){var e;return p(e=this._array,_(e,t)),this.unindexEl(t),this}removeFirst(t){let e=this.removeAt(this.indexOf(t));return this.unindexEl(e),e}removeAt(t){let e=p(this._array,t);return this.unindexEl(e),e}forEach(t,e=0){return A(this._array,t,e),this}forSome(t,e){return function(t,e,n){let r=-1;const i=l(t)?0:t.length;for(;++r<i;){const i=t[r];e(i,r)&&n(i,r)}}(this._array,t,e),this}until(t,e,n){return b(this._array,t,e,n),this}reverseForEach(t){return function(t,e){let n=l(t)?0:t.length;for(;--n>=0;)e(t[n],n)}(this._array,t),this}reverseUntil(t,e){return function(t,e,n){let r=l(t)?0:t.length,i=c(n);for(;--r>=0&&(i?!e(t[r],r):!e(t[r],r)&&(n(t[r],r),1)););}(this._array,t,e),this}some(t){return function(t,e){let n=!1,r=-1;const i=l(t)?0:t.length;for(;++r<i&&!(n=e(t[r])););return n}(this._array,t)}all(t){return function(t,e){let n=!0,r=-1;const i=l(t)?0:t.length;for(;++r<i&&(n=e(t[r])););return n}(this._array,t)}indexOf(t){let e=-1;return e=u(t)?v(this._array,t):_(this._array,t)}contains(t){let e=!1;return e=u(t)?void 0!==this.find(t):null!==this._indexer?void 0!==this._index[this._indexer(t)]:-1!==_(this._array,t)}reverse(){return function(t){let e=null,n=null;const r=l(t)?0:t.length;for(e=0;e<r/2;e+=1){n=r-1-e;const i=t[e];t[e]=t[n],t[n]=i}}(this._array),this}first(t){let e=-1;return-1===(e=void 0===t?0:v(this._array,t))?void 0:this.get(e)}find(t){return this.first(t)}last(){return 0===this.length?void 0:this.get(this.length-1)}filter(t){return this.create(E(this._array,t))}select(t){return this.create(E(this._array,t))}selectInto(t,e){let n=t instanceof T?t.values:t;return function(t,e,n){let r=-1,i=0;const s=l(t)?0:t.length,o=e.length;for(;++r<s;){const s=t[r];!0===n(s,r)&&(i<o?e[i++]=s:(++i,e.push(s)))}e.length=i}(n,this._array,e),this.index(n),this}head(t=1){return t=Math.max(0,t),this.create(x(this._array,0,t))}tail(t=1){return t=Math.min(this._array.length,t),this.create(x(this._array,Math.max(0,this._array.length-t)))}splice(t=0,e=1/0,n=[]){return function(t,e=0,n=1/0,r=[]){if(l(t))throw new Error("Unable to splice on null or undefined");let i=t.length;e=Math.max(0,e),e=Math.min(e,i),n=Math.max(0,n),n=Math.min(n,i-e);let s=r.length,o=i-n+s,h=n-s;if(h<0){t.length=o;let r=o;for(;--r>=e+n;)t[r]=t[r+h]}let a=e-1;for(;++a<e+s;)t[a]=r[a-e];if(h>0){for(--a;++a<i-h;)t[a]=t[a+h];t.length=o}}(this._array,t,e,a(n)?n:n.values),this._reindex(),this}orderBy(t){return this._array.sort(t),this}map(t){return this.create(function(t,e){let n=-1;const r=l(t)?0:t.length,i=new Array(r);for(;++n<r;)i[n]=e(t[n],n);return i}(this._array,t))}mapInto(t,e){return I(t instanceof T?t.values:t,this._array,e),this._reindex(),this}reduce(t,e){return function(t,e,n){let r=-1;const i=l(t)?0:t.length;let s=n;for(;++r<i;)s=e(s,t[r]);return s}(this._array,t,e)}reduceUntil(t,e,n){return function(t,e,n,r){let i=-1;const s=l(t)?0:t.length;let o=r;for(;++i<s&&!n(o,t[i]);)o=e(o,t[i]);return o}(this._array,t,e,n)}reverseReduce(t,e){return function(t,e,n){let r=l(t)?0:t.length,i=n;for(;--r>=0;)i=e(i,t[r]);return i}(this._array,t,e)}reverseReduceUntil(t,e,n){return function(t,e,n,r){let i=l(t)?0:t.length,s=r;for(;--i>=0&&!n(s,t[i]);)s=e(s,t[i]);return s}(this._array,t,e,n)}equals(t){return function t(e,n){let r=e===n;if(e!==n&&e instanceof Object&&function(t,e){return function(...t){return!function(...t){const e=t.length;let n,r=-1,i=!1;for(;!i&&++r<e;)i=void 0===(n=t[r])||null===n;return i}(...t)}(t,e)&&t.constructor===e.constructor}(e,n))if(a(e)){const i=e.length;let s=0;if(r=i===n.length)for(;s<i&&!1!==(r=t(e[s],n[s]));s+=1);}else if(e.constructor.prototype.equals)r=e.equals(n);else{const i=Object.keys(e);let s=null;r=!0;let o=-1;const h=i.length;for(;++o<h;)if(!(r=t(e[s=i[o]],n[s]))){if(!u(e[s]))break;r=!0}}return r}(this._array,t.values)}same(t){let e=this,n=0;return e.length===t.length&&(null!==e.indexer?t.until(t=>!e.contains(t),(t,e)=>++n):e.until(e=>!t.contains(e),(t,e)=>++n)),n===e.length}intersect(t){let e,n,r=this.create();return r.indexer=this.indexer,this.length<t.length?(n=this,e=t):(e=this,n=t),null!==e.indexer?n.forEach(t=>{e.contains(t)&&r.push(t)}):e.forEach(t=>{n.contains(t)&&r.push(t)}),r}union(t){let e,n,r=this.create();return r.indexer=this.indexer,this.length<t.length?(n=this,e=t):(e=this,n=t),null!==e.indexer?(r=e.clone(),n.forEach(t=>{e.contains(t)||r.push(t)})):(r=n.clone(),e.forEach(t=>{n.contains(t)||r.push(t)})),r}subtract(t){let e=this.create();return e.indexer=this.indexer,e=this.select(e=>!t.contains(e))}zip(t,e=((t,e)=>[t,e])){let n=this.create(),r=t.length;return this.until(function(t,e){return e>=r},function(r,i){n.push(e(r,t.get(i)))}),n}unzip(t=(t=>[t[0],t[1]])){let e=[this.create(),this.create()];return this.forEach(function(n){let r=t(n);e[0].push(r[0]),e[1].push(r[1])}),e}flatten(t=1/0){return this.create(t<1?this.values:this._flattenInner(this.values,t))}_flattenInner(t,e,n=-1,r=[]){let i=-1;const s=t.length;if(++n>e)r.push(t);else for(;++i<s;)a(t[i])?this._flattenInner(t[i],e,n,r):t[i]instanceof T?this._flattenInner(t[i].values,e,n,r):r.push(t[i]);return r}toJSON(){return this.values}serialize(){return this.values.map(t=>u(t.serialize)?t.serialize():t)}deserialize(t,...e){return function(t,e,...n){let[r,...i]=n;d(r)?d(r.prototype.deserialize)?I(t,e,t=>(new r).deserialize(t,...i)):I(t,e,t=>{let e=new r;return g(e,t),e}):w(t,e)}(t,this._array,...e),this}}h()&&!window.Symbol&&(window.Symbol={iterator:"iterator"});class R{constructor(){this._lookup=Object.create(null),this._list=new Array,this._isDirty=!1}create(){return new this.constructor}has(t){return void 0!==this._lookup[t]}contains(t){return this.has(t)}get(t){return this._lookup[t]}set(t,e){return this._isDirty=this._isDirty||this.has(t),void 0!==e&&(this._lookup[t]=e,this._isDirty||this._list.push(e)),this}delete(t){return this.has(t)&&(delete this._lookup[t],this._isDirty=!0),this}clear(){return f(this._lookup),this._list.length=0,this}get values(){return this.cleanList(),this._list}get keys(){return Object.keys(this._lookup)}get count(){let t=0;return t=this._isDirty?this.keys.length:this._list.length}cleanList(){this._isDirty&&this.reCreateList()}reCreateList(){let t=this._lookup,e=Object.keys(this._lookup),n=-1,r=this._list;for(r.length=0;++n<e.length;)r.push(t[e[n]])}clone(){let t=this.create();return t._isDirty=this._isDirty,t._list=y(this._list),t._lookup=y(this._lookup),t}toJSON(){return this._lookup}serialize(){let t=Object.create(null);return A(this.keys,e=>{let n=this.get(e);t[e]=u(n.serialize)?n.serialize():n}),t}deserialize(t,...e){let[n,...r]=e;if(this.clear(),d(n))if(d(n.prototype.deserialize))for(let e of Object.keys(t))this.set(e,(new n).deserialize(t[e],...r));else for(let e of Object.keys(t)){let r=new n;g(r,t[e]),this.set(e,r)}else for(let e of Object.keys(t))this.set(e,t[e]);return this}}class D{}D._hasPerformance="undefined"!=typeof performance;class P{static get time(){return D._time}static now(){if(D._hasPerformance)return performance.now();{const t=process.hrtime();return 1e3*t[0]+t[1]/1e6}}static start(){const t=P.now();return D._start=D._last=t,D._time=0}static stop(){const t=D._start,e=P.now();return D._last=e,D._time=e-t}}function S(){let t=(new Date).getTime();return t+=P.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}var M,L;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(M||(M={}));class k{}function N(t){return Array.prototype.slice.call(t)}function j(t,e){return N((e||k._document).querySelectorAll(t))}function z(t,e){let n=!1;if(e.matches)n=e.matches(t);else if(e.msMatchesSelector)n=e.msMatchesSelector(t);else if(e.webkitMatchesSelector)n=e.webkitMatchesSelector(t);else{if(null===e.parentElement)throw new Error("Element has no parent");n=""!==e.id?null!==e.parentElement.querySelector("#"+e.id):-1!==N(e.parentElement.querySelectorAll(t)).indexOf(e)}return n}k.Sides=M,k._window=o.window,k._document=o.window?o.window.document:void 0,k._el=o.window?o.window.document.createElement("div"):void 0,function(t){t[t.LinearInt=0]="LinearInt",t[t.RandomInt=1]="RandomInt",t[t.LinearFloat=2]="LinearFloat",t[t.RandomFloat=3]="RandomFloat"}(L||(L={}));var C="0.2.1",F=function(){function t(t){this.version=C,this.minSwipeDistance=100,this.maxTapDuration=400,this.defaultLongPressDuration=400,this.defaultDragResistance=0,this.dragResistanceSquared=0,this.events=["down","drag","up","press","tap","swipe"],this.downEvents=["down"],this.upEvents=["up","tap","swipe"],this.longPressIntervals=new R,this.eventAttr="",this.upEventsAndPress=[],this.index=0,this.lastInsides=new T,this.dragging=new T,this.isListeningToMovement=!1,this.init(t||document.body),this.eventAttr=this.events.map(function(t){return"["+t+"]"}).join(","),this.upEventsAndPress=this.upEvents.concat(["press"])}return t.prototype.init=function(t){var e=this;this.hasTouchEvent()&&(t.addEventListener("touchstart",function(n){e.start(n,t)}),t.addEventListener("touchend",function(n){e.end(n,t)})),t.addEventListener("mousedown",function(n){e.start(n,t)}),t.addEventListener("mouseup",function(n){e.end(n,t)}),t.addEventListener("focus",function(n){return e.triggerOutside(n.target,n,t)},!0),this.root=t},t.prototype.findTarget=function(t){for(var e=null;t&&t.parentElement!==document&&null===e;)z(this.eventAttr,t)&&(e=t),t=t.parentElement;return e},t.prototype.findTargets=function(t){for(var e=[];t&&t.parentElement!==document;)t.id||(t.id=S()),z(this.eventAttr,t)&&e.push(t),t=t.parentElement;return e},t.prototype.getTouchPos=function(t,e){return e=e||new r(0,0),t instanceof TouchEvent?(e.x=t.changedTouches[0].pageX,e.y=t.changedTouches[0].pageY):t instanceof MouseEvent&&(e.x=t.pageX,e.y=t.pageY),e},t.prototype.longPress=function(t,e){var n=e.touchInfo;(!1===this.executeAction(t,e,"press",n)||e.hasAttribute("once"))&&(clearInterval(this.longPressIntervals.get(n.index)),this.longPressIntervals.delete(n.index))},t.prototype.triggerOutside=function(t,e,n){var r=this,i=new T(j("[outside]",this.root));if(i.length>0){var s=new T(this.findTargets(t));s.contains(function(t){return t.hasAttribute("preventDefault")})||(i.filter(function(t){return r.lastInsides.contains(t)&&!s.contains(t)}).forEach(function(t){return r.handleEvent("outside",e,t)}),this.lastInsides=s)}},t.prototype.move=function(t,e,n,r){var i=!0,s=n.touchInfo;if(void 0!==s){if(this.getTouchPos(t,s.pos),0===s.dragResistance||this.getTouchPos(t).subtract(s.pos).lengthSq()<s.dragResistance){s.dragResistance=0;try{"[fn]"===r&&"drag-fn"in n?i=n["drag-fn"](t,n,s):(n["drag-fn"]=new Function("event","target","touch",r).bind(n),i=n["drag-fn"](t,n,s))}catch(t){throw name+" event function error on element '"+n.id+"'\n"+t.toString()}!1===i&&this.end(t,e)}}else this.end(t,e)},t.prototype.start=function(t,e){var n=this;this.longPressIntervals.values.forEach(function(t){return clearInterval(t)}),this.longPressIntervals.clear();var r=!1,i=t.target,s=0;for(this.triggerOutside(i,t,e);s<100&&(i=this.findTarget(i))&&!r;){++s;var o=null;i.hasAttribute("press")&&(o=setInterval(function(e){return n.longPress(t,e)}.bind(this,i),parseInt(i.getAttribute("pressInterval"))||this.defaultLongPressDuration));var h=void 0,a=0;if(i.hasAttribute("drag")){a=parseInt(i.getAttribute("dragResistance")),isNaN(a)&&(a=this.defaultDragResistance),a*=a;var u=i.getAttribute("drag");h=function(t,r,i){n.move(i,e,t,r)}.bind(this,i,u),this.hasTouchEvent()&&e.addEventListener("touchmove",h),e.addEventListener("mousemove",h)}i.classList.add("gt-active"),i.touchInfo={index:this.index++,time:P.now(),pos:this.getTouchPos(t),long:o,moveHandler:h,dragResistance:a},i.hasAttribute("dragstart")&&this.handleEvent("dragstart",t,i),o&&this.longPressIntervals.set(i.touchInfo.index,i.touchInfo.long),b(this.downEvents,function(e){return i.hasAttribute(e)&&((!(r=!1===n.handleEvent(e,t,i))&&i.hasAttribute("stopPropagation")||i.hasAttribute("gt-false"))&&(r=!0,t.stopPropagation()),(i.hasAttribute("preventDefault")||i.hasAttribute("gt-false"))&&t.preventDefault()),r}),i=i.parentElement}},t.prototype.isSwipe=function(t,e){var n=this.getTouchPos(t),i=!1;if("touchInfo"in e){var s=n.x-e.touchInfo.pos.x,o=n.y-e.touchInfo.pos.y,h=Math.abs(s),a=Math.abs(o),u=h>a,l=u?h:a;(i=l>=this.minSwipeDistance)&&(e.touchInfo.swipeInfo={direction:u?s<0?"left":"right":o<0?"up":"down",distance:l,delta:new r(s,o)})}return i},t.prototype.end=function(t,e){var n=this,r=P.now(),i=!1,s=t.target,o=0;new T;this.dragging.clear();for(var h=function(){++o;var e=s.touchInfo;if(void 0!==e){var h=r-e.time;b(a.upEventsAndPress,function(e){if(s.hasAttribute(e)){var r=n.isSwipe(t,s);("swipe"===e&&r||"tap"===e&&!r&&h<n.maxTapDuration||"up"===e)&&(i=!1===n.handleEvent(e,t,s)),(i||s.hasAttribute("stopPropagation")||s.hasAttribute("gt-false"))&&(i=!0,t.stopPropagation(),delete s.touchInfo),(s.hasAttribute("preventDefault")||s.hasAttribute("gt-false"))&&t.preventDefault()}return i})}s=s.parentElement},a=this;o<100&&(s=this.findTarget(s))&&!i;)h();j(".gt-active").forEach(function(r){r.classList.remove("gt-active"),void 0!==r.touchInfo&&void 0!==r.touchInfo.moveHandler&&(e.removeEventListener("touchmove",r.touchInfo.moveHandler),e.removeEventListener("mousemove",r.touchInfo.moveHandler),n.handleEvent("dragend",t,r)),delete r.touchInfo}),this.longPressIntervals.values.forEach(function(t){return clearInterval(t)}),this.longPressIntervals.clear()},t.prototype.executeAction=function(t,e,n,r){var i=!0,s=e.getAttribute(n);try{i="[fn]"===s&&n+"-fn"in e?e[n+"-fn"](t,e,r):new Function("event","target","touch",s).bind(e)(t,e,r)}catch(t){throw name+" event function error on element '"+e.id+"'\n"+t.toString()}return i},t.prototype.handleEvent=function(t,e,n){var r=t,i=!0;return n&&(i=this.executeAction(e,n,r,n.touchInfo),t in this.upEvents&&(n.classList.remove("gt-active"),this.longPressIntervals.has(n.touchInfo.index)&&clearInterval(this.longPressIntervals.get(n.touchInfo.index)),delete n.touchInfo)),i},t.prototype.on=function(t,e,n){t.setAttribute(e,"[fn]"),t[e+"-fn"]=n},t.prototype.off=function(t,e){t.removeAttribute(e+"-action"),delete t[e+"-fn"]},t.prototype.hideKeyboard=function(){var t=document.createElement("input");t.setAttribute("type","text"),document.body.appendChild(t),setTimeout(function(){t.focus(),setTimeout(function(){t.setAttribute("style","display:none;"),t.parentElement.removeChild(t)},50)},50)},t.prototype.hasTouchEvent=function(){return"ontouchstart"in document.documentElement},t.prototype.outside=function(){this.triggerOutside(this.root,new FocusEvent("")),this.hideKeyboard()},t}();return t.GoodTap=F,t.init=function(t){return new F(t)},t}({});
//# sourceMappingURL=goodtap.es5.iife.min.js.map
