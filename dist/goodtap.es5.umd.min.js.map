{"version":3,"file":"goodtap.es5.umd.min.js","sources":["../node_modules/goodcore/dist/lib/Calc.js","../node_modules/goodcore/dist/lib/struct/Vec2.js","../node_modules/goodcore/dist/lib/Global.js","../node_modules/goodcore/dist/lib/Test.js","../node_modules/goodcore/dist/lib/Obj.js","../node_modules/goodcore/dist/lib/Arr.js","../node_modules/goodcore/dist/lib/struct/Dictionary.js","../node_modules/goodcore/dist/lib/struct/List.js","../node_modules/goodcore/dist/lib/Timer.js","../node_modules/goodcore/dist/lib/Util.js","../node_modules/goodcore/dist/lib/struct/Tree.js","../node_modules/goodcore/dist/lib/struct/Stack.js","../node_modules/goodcore/dist/lib/Dom.js","../node_modules/goodcore/dist/lib/MocData.js","../node_modules/goodcore/dist/lib/standard/mixins/Initable.js","lib/index.js"],"sourcesContent":["export class CalcConst {\r\n}\r\nCalcConst.ROTATION_DEGREE_PRECISION = 1;\r\nCalcConst.RADIAN_FACTOR = (1 / 360) * (2 * Math.PI);\r\nCalcConst.DEGREE_FACTOR = (1 / (2 * Math.PI) * 360);\r\nCalcConst.DEG360 = 360 * CalcConst.ROTATION_DEGREE_PRECISION;\r\nCalcConst.ROTATION_LOOKUP = (function () {\r\n    const lookup = [];\r\n    for (let i = 0; i < 360 * CalcConst.ROTATION_DEGREE_PRECISION; i++) {\r\n        lookup.push([Math.cos(i * CalcConst.RADIAN_FACTOR), Math.sin(i * CalcConst.RADIAN_FACTOR)]);\r\n    }\r\n    return lookup;\r\n})();\r\nexport function sign(x) {\r\n    return typeof x === \"number\" ? x ? x < 0 ? -1 : 1 : x === x ? 0 : NaN : NaN;\r\n}\r\nexport function rotationDeg(rotation) {\r\n    let deg = (rotation * CalcConst.ROTATION_DEGREE_PRECISION) | 0;\r\n    while (deg < 0) {\r\n        deg += CalcConst.DEG360;\r\n    }\r\n    while (deg >= CalcConst.DEG360) {\r\n        deg -= CalcConst.DEG360;\r\n    }\r\n    return CalcConst.ROTATION_LOOKUP[deg];\r\n}\r\nexport function rotationRad(rotation) {\r\n    const deg = rotation * CalcConst.DEGREE_FACTOR * CalcConst.ROTATION_DEGREE_PRECISION | 0;\r\n    return this.rotationDeg(deg / CalcConst.ROTATION_DEGREE_PRECISION);\r\n}\r\nexport function closestRadianRotation(radian) {\r\n    let deg = radian * CalcConst.DEGREE_FACTOR * CalcConst.ROTATION_DEGREE_PRECISION | 0;\r\n    while (deg < 0) {\r\n        deg += CalcConst.DEG360;\r\n    }\r\n    while (deg >= CalcConst.DEG360) {\r\n        deg -= CalcConst.DEG360;\r\n    }\r\n    return deg * CalcConst.RADIAN_FACTOR / CalcConst.ROTATION_DEGREE_PRECISION;\r\n}\r\n//# sourceMappingURL=Calc.js.map","import { rotationRad } from \"../Calc\";\r\nexport class Vec2Const {\r\n}\r\nVec2Const.EPSILON = 1e-8;\r\nVec2Const.IDENTITY = { x: 1, y: 1 };\r\nVec2Const.X_DIM = { x: 1, y: 0 };\r\nVec2Const.Y_DIM = { x: 0, y: 1 };\r\nexport class Vec2 {\r\n    constructor(x = 0, y = 0) {\r\n        this.angle = this.horizontalAngle;\r\n        this.direction = this.horizontalAngle;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    get isZero() {\r\n        return this.x === 0 && this.y === 0;\r\n    }\r\n    create(x = 0, y = 0) {\r\n        return new (this.constructor)(x, y);\r\n    }\r\n    set(src) {\r\n        this.x = src.x;\r\n        this.y = src.y;\r\n        return this;\r\n    }\r\n    clone(out) {\r\n        const result = out ? out.set(this) : this.create(this.x, this.y);\r\n        return result;\r\n    }\r\n    toInt() {\r\n        this.x |= 0;\r\n        this.y |= 0;\r\n        return this;\r\n    }\r\n    ceil() {\r\n        this.x = Math.ceil(this.x);\r\n        this.y = Math.ceil(this.y);\r\n        return this;\r\n    }\r\n    toDecimal() {\r\n        this.x += Vec2Const.EPSILON;\r\n        this.y += Vec2Const.EPSILON;\r\n        return this;\r\n    }\r\n    lengthSq() { return (this.x * this.x + this.y * this.y); }\r\n    length() { return Math.sqrt(this.lengthSq()); }\r\n    horizontalAngle() { return Math.atan2(this.y, this.x); }\r\n    rotate(angle) {\r\n        const rot = rotationRad(angle);\r\n        const nx = (this.x * rot[0]) - (this.y * rot[1]);\r\n        const ny = (this.x * rot[1]) + (this.y * rot[0]);\r\n        this.x = nx;\r\n        this.y = ny;\r\n        return this;\r\n    }\r\n    rotateAround(center, angle) {\r\n        return this.subtract(center).rotate(angle).add(center);\r\n    }\r\n    normalize() {\r\n        const len = this.length();\r\n        if (len === 0) {\r\n            this.x = 1;\r\n            this.y = 0;\r\n        }\r\n        else {\r\n            this.x = this.x / len;\r\n            this.y = this.y / len;\r\n        }\r\n        return this;\r\n    }\r\n    scale(vectorB) {\r\n        this.x = this.x * vectorB.x;\r\n        this.y = this.y * vectorB.y;\r\n        return this;\r\n    }\r\n    relate(vectorB) {\r\n        this.x = this.x / vectorB.x;\r\n        this.y = this.y / vectorB.y;\r\n        return this;\r\n    }\r\n    multiply(scalar) {\r\n        this.x = this.x * scalar;\r\n        this.y = this.y * scalar;\r\n        return this;\r\n    }\r\n    add(vectorB) {\r\n        this.x = this.x + vectorB.x;\r\n        this.y = this.y + vectorB.y;\r\n        return this;\r\n    }\r\n    subtract(vectorB) {\r\n        this.x = this.x - vectorB.x;\r\n        this.y = this.y - vectorB.y;\r\n        return this;\r\n    }\r\n    invert() {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        return this;\r\n    }\r\n    equals(target) {\r\n        return this.x === target.x && this.y === target.y;\r\n    }\r\n    almostEquals(target) {\r\n        return Math.abs(this.x - target.x) < Vec2Const.EPSILON && Math.abs(this.y - target.y) < Vec2Const.EPSILON;\r\n    }\r\n    getNormal(isNormalized) {\r\n        const result = this.clone();\r\n        if (!isNormalized) {\r\n            result.set(this).normalize();\r\n        }\r\n        const temp = result.x;\r\n        result.x = result.y;\r\n        result.y = -temp;\r\n        return result;\r\n    }\r\n    dot(vectorB) { return (this.x * vectorB.x + this.y * vectorB.y); }\r\n    cross(vectorB) { return ((this.x * vectorB.y) - (this.y * vectorB.x)); }\r\n    projectOnto(vectorB) {\r\n        const coeff = ((this.x * vectorB.x) + (this.y * vectorB.y)) / ((vectorB.x * vectorB.x) + (vectorB.y * vectorB.y));\r\n        this.x = coeff * vectorB.x;\r\n        this.y = coeff * vectorB.y;\r\n        return this;\r\n    }\r\n    verticalAngle() { return Math.atan2(this.x, this.y); }\r\n    rotateBy(rotation) {\r\n        const angle = -this.horizontalAngle() + rotation;\r\n        return this.rotate(angle);\r\n    }\r\n    max(v) {\r\n        this.x = Math.max(this.x, v.x);\r\n        this.y = Math.max(this.y, v.y);\r\n        return this;\r\n    }\r\n    min(v) {\r\n        this.x = Math.min(this.x, v.x);\r\n        this.y = Math.min(this.y, v.y);\r\n        return this;\r\n    }\r\n    zero() {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Vec2.js.map","let nativeWindow = true;\r\nvar win;\r\nif (typeof (window) === \"undefined\") {\r\n    win = null;\r\n    nativeWindow = false;\r\n}\r\nelse {\r\n    win = window;\r\n}\r\nexport class _Global {\r\n    constructor() {\r\n        this._window = win;\r\n        this._nativeWindow = nativeWindow;\r\n    }\r\n    get window() {\r\n        return this._window;\r\n    }\r\n    set window(v) {\r\n        this._window = v;\r\n        if (this.hasNativeWindow) {\r\n            win = v;\r\n        }\r\n    }\r\n    get hasNativeWindow() {\r\n        return this._nativeWindow;\r\n    }\r\n}\r\nexport let Global = new _Global();\r\n//# sourceMappingURL=Global.js.map","import { Global } from \"./Global\";\r\nexport function hasWindow() {\r\n    return Global.window !== null;\r\n}\r\nexport function hasConsole() {\r\n    return this.hasWindow() && Global.window.console !== undefined || typeof (console) === \"function\";\r\n}\r\nexport function isArray(it) {\r\n    return Array.isArray ? Array.isArray(it) : Object.prototype.toString.call(it) === \"[object Array]\";\r\n}\r\nexport function isElement(target) {\r\n    return target !== undefined && target !== null && target.nodeType === 1 ? true : false;\r\n}\r\nexport function isFunction(it) {\r\n    return Object.prototype.toString.call(it) === \"[object Function]\";\r\n}\r\nexport function isNumber(x) {\r\n    return x === +x;\r\n}\r\nexport function isInt(x) {\r\n    return isNumber(x) && (x === (x | 0));\r\n}\r\nexport function isString(x) {\r\n    return isNotNullOrUndefined(x) && x.constructor === String;\r\n}\r\nexport function areNullOrUndefined(...args) {\r\n    const len = args.length;\r\n    let i = -1;\r\n    let a;\r\n    let result = false;\r\n    while (!result && ++i < len) {\r\n        a = args[i];\r\n        result = a === undefined || a === null;\r\n    }\r\n    return result;\r\n}\r\nexport function areNotNullOrUndefined(...args) {\r\n    return !areNullOrUndefined(...args);\r\n}\r\nexport function isNullOrUndefined(arg) {\r\n    return arg === undefined || arg === null;\r\n}\r\nexport function isNotNullOrUndefined(arg) {\r\n    return !isNullOrUndefined(arg);\r\n}\r\nexport function areUndefined(...args) {\r\n    const len = args.length;\r\n    let i = -1;\r\n    let a;\r\n    let result = false;\r\n    while (!result && ++i < len) {\r\n        a = args[i];\r\n        result = a === undefined;\r\n    }\r\n    return result;\r\n}\r\nexport function areNotUndefined(...args) {\r\n    return !areUndefined(...args);\r\n}\r\nexport function isUndefined(arg) {\r\n    return arg === undefined;\r\n}\r\nexport function isNotUndefined(arg) {\r\n    return !isUndefined(arg);\r\n}\r\n//# sourceMappingURL=Test.js.map","import { deepCopy, flatten } from \"./Arr\";\r\nimport { areNotNullOrUndefined, isArray, isFunction } from \"./Test\";\r\nexport function destroy(obj) {\r\n    if (obj.constructor.prototype.destroy !== undefined) {\r\n        obj.destroy();\r\n    }\r\n    else {\r\n        setNull(obj);\r\n    }\r\n}\r\nexport function wipe(obj) {\r\n    const keys = Object.keys(obj);\r\n    let i = -1;\r\n    const len = keys.length;\r\n    while (++i < len) {\r\n        delete obj[keys[i]];\r\n    }\r\n}\r\nexport function setNull(obj) {\r\n    if (obj.constructor.prototype.clear !== undefined) {\r\n        obj.clear();\r\n    }\r\n    else {\r\n        const keys = Object.keys(obj);\r\n        let key = null;\r\n        let i = -1;\r\n        const len = keys.length;\r\n        while (++i < len) {\r\n            key = keys[i];\r\n            obj[key] = null;\r\n        }\r\n    }\r\n}\r\nexport function isClassOf(a, b) {\r\n    return areNotNullOrUndefined(a, b) && a instanceof b.constructor;\r\n}\r\nexport function isSameClass(a, b) {\r\n    return areNotNullOrUndefined(a, b) && a.constructor === b.constructor;\r\n}\r\nexport function inherits(a, b) {\r\n    return isClassOf(a, b) && !isSameClass(a, b);\r\n}\r\nexport function equals(a, b) {\r\n    let result = a === b;\r\n    if (a !== b && (a instanceof Object) && isSameClass(a, b)) {\r\n        if (isArray(a)) {\r\n            const len = a.length;\r\n            let i = 0;\r\n            result = len === b.length;\r\n            if (result) {\r\n                for (; i < len; i += 1) {\r\n                    result = equals(a[i], b[i]);\r\n                    if (result === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (a.constructor.prototype.equals) {\r\n            result = a.equals(b);\r\n        }\r\n        else {\r\n            const keys = Object.keys(a);\r\n            let key = null;\r\n            result = true;\r\n            let i = -1;\r\n            const len = keys.length;\r\n            while (++i < len) {\r\n                key = keys[i];\r\n                result = equals(a[key], b[key]);\r\n                if (!result) {\r\n                    if (isFunction(a[key])) {\r\n                        result = true;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function isDifferent(a, b) {\r\n    return !equals(a, b);\r\n}\r\nexport function shallowCopy(obj) {\r\n    const keys = Object.keys(obj);\r\n    const result = {};\r\n    let i = -1;\r\n    const len = keys.length;\r\n    while (++i < len) {\r\n        const key = keys[i];\r\n        result[key] = obj[key];\r\n    }\r\n    return result;\r\n}\r\nexport function clone(obj) {\r\n    let result;\r\n    if (!(obj instanceof Object)) {\r\n        result = obj;\r\n    }\r\n    else if (obj.constructor.prototype.clone !== undefined) {\r\n        result = obj.clone();\r\n    }\r\n    else if (isArray(obj)) {\r\n        result = deepCopy(obj);\r\n    }\r\n    else if (obj instanceof Date) {\r\n        return new Date(obj.getTime());\r\n    }\r\n    else if (obj instanceof RegExp) {\r\n        return new RegExp(obj);\r\n    }\r\n    else {\r\n        result = new obj.constructor();\r\n        const keys = Object.keys(obj);\r\n        let key = null;\r\n        let i = -1;\r\n        const len = keys.length;\r\n        while (++i < len) {\r\n            key = keys[i];\r\n            result[key] = clone(obj[key]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function cloneInto(src, target) {\r\n    if (isArray(target)) {\r\n        const arrS = src;\r\n        const arrT = target;\r\n        const len = arrS.length;\r\n        arrT.length = len;\r\n        let i = -1;\r\n        while (++i < len) {\r\n            if (arrS[i] instanceof Object) {\r\n                cloneInto(arrS[i], arrT[i]);\r\n            }\r\n            else {\r\n                arrT[i] = arrS[i];\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        const keys = Object.keys(src);\r\n        let key = null;\r\n        let i = -1;\r\n        const len = keys.length;\r\n        while (++i < len) {\r\n            key = keys[i];\r\n            const a = src[key];\r\n            if (a instanceof Object) {\r\n                let b = target[key];\r\n                if (b === undefined || b === null) {\r\n                    if (isArray(a)) {\r\n                        b = target[key] = [];\r\n                    }\r\n                    else {\r\n                        b = target[key] = {};\r\n                    }\r\n                }\r\n                if (isDifferent(a, b)) {\r\n                    cloneInto(a, b);\r\n                }\r\n            }\r\n            else {\r\n                target[key] = a;\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\nexport function mixin(target = {}, exclude, ...sources) {\r\n    const result = target, len = sources ? sources.length : 0;\r\n    let i = 0;\r\n    sources = flatten(sources);\r\n    for (; i < len; i++) {\r\n        let src = sources[i];\r\n        if (isFunction(src)) {\r\n            src = src.prototype;\r\n        }\r\n        if (src === undefined) {\r\n            continue;\r\n        }\r\n        const keys = Object.keys(src);\r\n        let key = null;\r\n        if (exclude) {\r\n            let i = -1;\r\n            const len = keys.length;\r\n            while (++i < len) {\r\n                key = keys[i];\r\n                if (exclude.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n                target[key] = src[key];\r\n            }\r\n        }\r\n        else {\r\n            let i = -1;\r\n            const len = keys.length;\r\n            while (++i < len) {\r\n                key = keys[i];\r\n                target[key] = src[key];\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function setProperties(target, values, mapping) {\r\n    const keys = Object.keys(values);\r\n    let key;\r\n    let value;\r\n    let i = -1;\r\n    const len = keys.length;\r\n    while (++i < len) {\r\n        key = keys[i];\r\n        value = values[key];\r\n        if (mapping && key in mapping) {\r\n            key = mapping[key];\r\n        }\r\n        if (key in target) {\r\n            target[key] = values[keys[i]];\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Obj.js.map","import { clone, setProperties } from \"./Obj\";\r\nimport { isArray, isNullOrUndefined, isNumber, isUndefined, isNotUndefined } from \"./Test\";\r\nclass ArrayState {\r\n}\r\nexport function flatten(src) {\r\n    return flattenInner(src);\r\n}\r\nfunction flattenInner(src, result = []) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len) {\r\n        if (isArray(src[i])) {\r\n            flattenInner(src[i], result);\r\n        }\r\n        else {\r\n            result.push(src[i]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function reverse(array) {\r\n    let left = null;\r\n    let right = null;\r\n    const length = isNullOrUndefined(array) ? 0 : array.length;\r\n    for (left = 0; left < length / 2; left += 1) {\r\n        right = length - 1 - left;\r\n        const temporary = array[left];\r\n        array[left] = array[right];\r\n        array[right] = temporary;\r\n    }\r\n    return array;\r\n}\r\nexport function concat(...arrs) {\r\n    const result = Array.prototype.concat.apply([], arrs);\r\n    return result;\r\n}\r\nexport function slice(src, from = 0, count = Infinity) {\r\n    let len = Math.min(isNullOrUndefined(src) ? 0 : src.length - from, count);\r\n    if (len < 0) {\r\n        len = 0;\r\n    }\r\n    let i = -1;\r\n    const result = new Array(len);\r\n    while (++i < len) {\r\n        result[i] = src[i + from];\r\n    }\r\n    return result;\r\n}\r\nexport function splice(src, pos = 0, remove = Infinity, insert = []) {\r\n    if (isNullOrUndefined(src)) {\r\n        throw new Error(\"Unable to splice on null or undefined\");\r\n    }\r\n    let srcLen = src.length;\r\n    pos = Math.max(0, pos);\r\n    pos = Math.min(pos, srcLen);\r\n    remove = Math.max(0, remove);\r\n    remove = Math.min(remove, srcLen - pos);\r\n    let insertLen = insert.length;\r\n    let newLen = srcLen - remove + insertLen;\r\n    let delta = remove - insertLen;\r\n    if (delta < 0) {\r\n        src.length = newLen;\r\n        let i = newLen;\r\n        while (--i >= pos + remove) {\r\n            src[i] = src[i + delta];\r\n        }\r\n    }\r\n    let i = pos - 1;\r\n    while (++i < pos + insertLen) {\r\n        src[i] = insert[i - pos];\r\n    }\r\n    if (delta > 0) {\r\n        --i;\r\n        while (++i < srcLen - delta) {\r\n            src[i] = src[i + delta];\r\n        }\r\n        src.length = newLen;\r\n    }\r\n}\r\nexport function append(arr, values) {\r\n    let index = -1;\r\n    const offset = arr.length;\r\n    const length = isNullOrUndefined(values) ? 0 : values.length;\r\n    while (++index < length) {\r\n        arr[offset + index] = values[index];\r\n    }\r\n}\r\nexport function removeAt(arr, index) {\r\n    let result;\r\n    let len = isNullOrUndefined(arr) ? 0 : arr.length;\r\n    if (index >= 0 && index < len) {\r\n        let i = index;\r\n        result = arr[index];\r\n        while (++i < len) {\r\n            arr[i - 1] = arr[i];\r\n        }\r\n        arr.length -= 1;\r\n    }\r\n    return result;\r\n}\r\nexport function indexOfElement(src, el) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len) {\r\n        if (src[i] === el) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nexport function remove(arr, el) {\r\n    const start = indexOfElement(arr, el);\r\n    removeAt(arr, start);\r\n}\r\nexport function indexOf(src, fn) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len) {\r\n        if (fn(src[i])) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nexport function removeOneByFn(arr, fn) {\r\n    const start = indexOf(arr, fn);\r\n    removeAt(arr, start);\r\n}\r\nexport function shallowCopy(src) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    const result = new Array(len);\r\n    while (++i < len) {\r\n        result[i] = src[i];\r\n    }\r\n    return result;\r\n}\r\nexport function shallowCopyInto(src, target) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    target.length = len;\r\n    while (++i < len) {\r\n        target[i] = src[i];\r\n    }\r\n}\r\nexport function shallowFill(src, target, at = 0) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    if (target.length < len + at) {\r\n        target.length = len + at;\r\n    }\r\n    while (++i < len) {\r\n        target[at + i] = src[i];\r\n    }\r\n}\r\nexport function deepCopy(src) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    const result = new Array(len);\r\n    while (++i < len) {\r\n        result[i] = (clone(src[i]));\r\n    }\r\n    return result;\r\n}\r\nexport function deepCopyInto(src, target) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    target.length = len;\r\n    while (++i < len) {\r\n        target[i] = (clone(src[i]));\r\n    }\r\n}\r\nexport function deepFill(src, target, at = 0) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    if (target.length < len + at) {\r\n        target.length = len + at;\r\n    }\r\n    while (++i < len) {\r\n        target[at + i] = (clone(src[i]));\r\n    }\r\n}\r\nexport function filter(src, fn) {\r\n    const result = [];\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len) {\r\n        const el = src[i];\r\n        if (fn(el, i) === true) {\r\n            result.push(el);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function filterInto(src, target, fn) {\r\n    let i = -1;\r\n    let j = 0;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    const space = target.length;\r\n    while (++i < len) {\r\n        const el = src[i];\r\n        if (fn(el, i) === true) {\r\n            if (j < space) {\r\n                target[j++] = el;\r\n            }\r\n            else {\r\n                ++j;\r\n                target.push(el);\r\n            }\r\n        }\r\n    }\r\n    target.length = j;\r\n}\r\nexport function map(src, fn) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    const result = new Array(len);\r\n    while (++i < len) {\r\n        result[i] = fn(src[i], i);\r\n    }\r\n    return result;\r\n}\r\nexport function mapInto(src, target, fn) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    target.length = len;\r\n    while (++i < len) {\r\n        target[i] = fn(src[i], i);\r\n    }\r\n}\r\nexport function reduce(src, fn, start) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    let acc = start;\r\n    while (++i < len) {\r\n        acc = fn(acc, src[i]);\r\n    }\r\n    return acc;\r\n}\r\nexport function reduceUntil(src, fn, test, start) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    let acc = start;\r\n    while (++i < len && !test(acc, src[i])) {\r\n        acc = fn(acc, src[i]);\r\n    }\r\n    return acc;\r\n}\r\nexport function reverseReduce(src, fn, start) {\r\n    let i = isNullOrUndefined(src) ? 0 : src.length;\r\n    let acc = start;\r\n    while (--i >= 0) {\r\n        acc = fn(acc, src[i]);\r\n    }\r\n    return acc;\r\n}\r\nexport function reverseReduceUntil(src, fn, test, start) {\r\n    let i = isNullOrUndefined(src) ? 0 : src.length;\r\n    let acc = start;\r\n    while (--i >= 0 && !test(acc, src[i])) {\r\n        acc = fn(acc, src[i]);\r\n    }\r\n    return acc;\r\n}\r\nexport function forEach(src, fn, startIndex = 0) {\r\n    let i = startIndex - 1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len) {\r\n        fn(src[i], i);\r\n    }\r\n}\r\nexport function forSome(src, filter, fn) {\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len) {\r\n        const el = src[i];\r\n        if (filter(el, i)) {\r\n            fn(el, i);\r\n        }\r\n    }\r\n}\r\nexport function until(src, fnOrTest, fn, startIndex) {\r\n    let isCombined = isUndefined(fn) || isNumber(fn);\r\n    startIndex = isCombined ? fn : startIndex;\r\n    let i = isUndefined(startIndex) || startIndex < 0 ? -1 : startIndex - 1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len && (isCombined ? !fnOrTest(src[i], i) : !(fnOrTest(src[i], i) || (fn(src[i], i), false)))) {\r\n    }\r\n}\r\nexport function reverseForEach(src, fn) {\r\n    let i = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (--i >= 0) {\r\n        fn(src[i], i);\r\n    }\r\n}\r\nexport function reverseUntil(src, fnOrTest, fn) {\r\n    let i = isNullOrUndefined(src) ? 0 : src.length;\r\n    let combined = isUndefined(fn);\r\n    while (--i >= 0 && (combined ? !fnOrTest(src[i], i) : !(fnOrTest(src[i], i) || (fn(src[i], i), false)))) {\r\n    }\r\n}\r\nexport function some(src, fn) {\r\n    let result = false;\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len && !(result = fn(src[i]))) {\r\n    }\r\n    return result;\r\n}\r\nexport function all(src, fn) {\r\n    let result = true;\r\n    let i = -1;\r\n    const len = isNullOrUndefined(src) ? 0 : src.length;\r\n    while (++i < len && (result = fn(src[i]))) {\r\n    }\r\n    return result;\r\n}\r\nexport function insertAt(src, pos, v) {\r\n    if (isNullOrUndefined(src)) {\r\n        throw new Error(\"Unable to insertAt on null or undefined\");\r\n    }\r\n    if (pos === 0) {\r\n        src.unshift(v);\r\n    }\r\n    else if (pos > 0) {\r\n        let i = src.length;\r\n        while (--i >= pos) {\r\n            src[i + 1] = src[i];\r\n        }\r\n        src[i + 1] = v;\r\n    }\r\n}\r\nexport function binarySearch(src, cmp, closest = false) {\r\n    let lo = 0, hi = isNullOrUndefined(src) ? -1 : src.length - 1, mid, element;\r\n    while (lo <= hi) {\r\n        mid = ((lo + hi) >> 1);\r\n        element = src[mid];\r\n        let val = cmp(element);\r\n        if (val < 0) {\r\n            lo = mid + 1;\r\n        }\r\n        else if (val > 0) {\r\n            hi = mid - 1;\r\n        }\r\n        else {\r\n            return mid;\r\n        }\r\n    }\r\n    return closest ? lo : -1;\r\n}\r\nexport function create(length, populator) {\r\n    if ((length || -1) < 0) {\r\n        length = 0;\r\n    }\r\n    let arr = new Array(length);\r\n    let i = -1;\r\n    while (++i < length) {\r\n        arr[i] = populator(i, arr);\r\n    }\r\n    return arr;\r\n}\r\nexport function deserialize(array, target, ...types) {\r\n    let [T, ...passthroughT] = types;\r\n    if (isNotUndefined(T)) {\r\n        if (isNotUndefined(T.prototype.deserialize)) {\r\n            mapInto(array, target, (el) => {\r\n                return (new T()).deserialize(el, ...passthroughT);\r\n            });\r\n        }\r\n        else {\r\n            mapInto(array, target, (el) => {\r\n                let newT = new T();\r\n                setProperties(newT, el);\r\n                return newT;\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        deepCopyInto(array, target);\r\n    }\r\n    return this;\r\n}\r\n//# sourceMappingURL=Arr.js.map","import { forEach } from \"../Arr\";\r\nimport { clone, setProperties, wipe } from \"../Obj\";\r\nimport { isFunction, isNotUndefined } from \"../Test\";\r\nimport { List } from \"./List\";\r\nexport class Dictionary {\r\n    constructor() {\r\n        this._lookup = Object.create(null);\r\n        this._list = new List();\r\n        this._isDirty = false;\r\n    }\r\n    create() {\r\n        return new (this.constructor)();\r\n    }\r\n    has(key) {\r\n        return this._lookup[key] !== undefined;\r\n    }\r\n    contains(key) {\r\n        return this.has(key);\r\n    }\r\n    get(key) {\r\n        return this._lookup[key];\r\n    }\r\n    set(key, value) {\r\n        this._isDirty = this._isDirty || this.has(key);\r\n        if (value !== undefined) {\r\n            this._lookup[key] = value;\r\n            if (!this._isDirty) {\r\n                this._list.push(value);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    delete(key) {\r\n        if (this.has(key)) {\r\n            delete this._lookup[key];\r\n            this._isDirty = true;\r\n        }\r\n        return this;\r\n    }\r\n    clear() {\r\n        wipe(this._lookup);\r\n        this._list.clear();\r\n        return this;\r\n    }\r\n    get values() {\r\n        this.cleanList();\r\n        return this._list.values;\r\n    }\r\n    get keys() {\r\n        return Object.keys(this._lookup);\r\n    }\r\n    get list() {\r\n        this.cleanList();\r\n        return this._list;\r\n    }\r\n    get count() {\r\n        let result = 0;\r\n        if (this._isDirty) {\r\n            result = this.keys.length;\r\n        }\r\n        else {\r\n            result = this._list.count;\r\n        }\r\n        return result;\r\n    }\r\n    cleanList() {\r\n        if (this._isDirty) {\r\n            this.reCreateList();\r\n        }\r\n    }\r\n    reCreateList() {\r\n        let lookup = this._lookup;\r\n        let keys = Object.keys(this._lookup);\r\n        let i = -1;\r\n        let list = this._list;\r\n        list.clear();\r\n        while (++i < keys.length) {\r\n            list.add(lookup[keys[i]]);\r\n        }\r\n    }\r\n    clone() {\r\n        let result = this.create();\r\n        result._isDirty = this._isDirty;\r\n        result._list = this._list.clone();\r\n        result._lookup = clone(this._lookup);\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        return this._lookup;\r\n    }\r\n    serialize() {\r\n        let obj = Object.create(null);\r\n        forEach(this.keys, (key) => {\r\n            let v = this.get(key);\r\n            obj[key] = isFunction(v.serialize) ? v.serialize() : v;\r\n        });\r\n        return obj;\r\n    }\r\n    deserialize(obj, ...types) {\r\n        let [T, ...passthroughT] = types;\r\n        this.clear();\r\n        if (isNotUndefined(T)) {\r\n            if (isNotUndefined(T.prototype.deserialize)) {\r\n                for (let key of Object.keys(obj)) {\r\n                    this.set(key, (new T()).deserialize(obj[key], ...passthroughT));\r\n                }\r\n            }\r\n            else {\r\n                for (let key of Object.keys(obj)) {\r\n                    let newT = new T();\r\n                    setProperties(newT, obj[key]);\r\n                    this.set(key, newT);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let key of Object.keys(obj)) {\r\n                this.set(key, obj[key]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Dictionary.js.map","import * as Arr from \"../Arr\";\r\nimport { clone, equals } from \"../Obj\";\r\nimport { isArray, isFunction, isNotNullOrUndefined } from \"../Test\";\r\nimport { Dictionary } from \"./Dictionary\";\r\nexport class List {\r\n    constructor(arr) {\r\n        this._array = [];\r\n        this._index = null;\r\n        this._indexer = null;\r\n        if (arr === undefined) {\r\n            this._array = new Array();\r\n        }\r\n        else {\r\n            if (arr instanceof (List)) {\r\n                this._array = Arr.shallowCopy(arr._array);\r\n            }\r\n            else {\r\n                this._array = Arr.shallowCopy(arr);\r\n            }\r\n        }\r\n    }\r\n    create(arr) {\r\n        return new (this.constructor)(arr);\r\n    }\r\n    get values() {\r\n        return this._array;\r\n    }\r\n    get(pos) {\r\n        return this._array[pos];\r\n    }\r\n    getByIndex(key) {\r\n        let result;\r\n        return isNotNullOrUndefined(this._index) ? this._index.get(key) : undefined;\r\n    }\r\n    set(pos, v) {\r\n        if (pos >= 0 && pos < this.length) {\r\n            this._array[pos | 0] = v;\r\n            if (this._indexer !== null) {\r\n                this._index.set(this._indexer(v), v);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(`index out of bounds on <List>.set(${pos}, ${v.toString()})`);\r\n        }\r\n        return this;\r\n    }\r\n    get count() {\r\n        return this._array.length;\r\n    }\r\n    get length() {\r\n        return this._array.length;\r\n    }\r\n    get indexer() {\r\n        return this._indexer;\r\n    }\r\n    set indexer(fn) {\r\n        this._indexer = fn;\r\n        this._reindex();\r\n    }\r\n    _reindex() {\r\n        if (this._indexer === null) {\r\n            this._index = null;\r\n        }\r\n        else {\r\n            if (this._index === null) {\r\n                this._index = new Dictionary();\r\n            }\r\n            else {\r\n                this._index.clear();\r\n            }\r\n            this.forEach((el) => this._index.set(this._indexer(el), el));\r\n        }\r\n    }\r\n    fill(size, populator) {\r\n        size = Math.max(0, size || 0);\r\n        if (isFunction(populator)) {\r\n            this._array = Arr.create(size, populator);\r\n        }\r\n        else if (!(populator instanceof Object)) {\r\n            this._array = Arr.create(size, () => populator);\r\n        }\r\n        else {\r\n            this._array = Arr.create(size, () => clone(populator));\r\n        }\r\n        this._reindex();\r\n        return this;\r\n    }\r\n    clear() {\r\n        this._array.length = 0;\r\n        if (this._index !== null) {\r\n            this._index.clear();\r\n        }\r\n        return this;\r\n    }\r\n    add(v) {\r\n        this._array.push(v);\r\n        if (this._indexer !== null) {\r\n            this._index.set(this._indexer(v), v);\r\n        }\r\n        return this;\r\n    }\r\n    insertAt(pos, v) {\r\n        Arr.insertAt(this._array, pos, v);\r\n        if (this._indexer !== null) {\r\n            this._index.set(this._indexer(v), v);\r\n        }\r\n        return this;\r\n    }\r\n    push(v) {\r\n        if (this._indexer !== null) {\r\n            this._index.set(this._indexer(v), v);\r\n        }\r\n        return this._array.push(v);\r\n    }\r\n    pop() {\r\n        let result = this._array.pop();\r\n        if (result !== undefined && this._indexer !== null) {\r\n            this._index.delete(this._indexer(result));\r\n        }\r\n        return result;\r\n    }\r\n    shift() {\r\n        let result = this._array.shift();\r\n        if (result !== undefined && this._indexer !== null) {\r\n            this._index.delete(this._indexer(result));\r\n        }\r\n        return result;\r\n    }\r\n    concat(v) {\r\n        let arr;\r\n        let arr2 = v instanceof List ? v.values : v;\r\n        arr = Arr.concat(this._array, arr2);\r\n        return this.create(arr);\r\n    }\r\n    index(arr) {\r\n        if (this._indexer !== null) {\r\n            Arr.forEach(arr, (el) => {\r\n                this._index.set(this._indexer(el), el);\r\n            });\r\n        }\r\n    }\r\n    unindexEl(el) {\r\n        if (this._indexer !== null) {\r\n            this._index.delete(this._indexer(el));\r\n        }\r\n    }\r\n    append(v) {\r\n        let arr2 = v instanceof List ? v.values : v;\r\n        Arr.append(this._array, arr2);\r\n        this.index(arr2);\r\n        return this;\r\n    }\r\n    copy(src) {\r\n        let arr2 = src instanceof List ? src.values : src;\r\n        Arr.deepCopyInto(arr2, this._array);\r\n        this.index(arr2);\r\n        return this;\r\n    }\r\n    shallowCopy(src) {\r\n        let arr2 = src instanceof List ? src.values : src;\r\n        Arr.shallowCopyInto(arr2, this._array);\r\n        this.index(arr2);\r\n        return this;\r\n    }\r\n    clone() {\r\n        const arr = Arr.deepCopy(this._array);\r\n        let result = this.create(arr);\r\n        if (this._indexer !== null) {\r\n            result._indexer = this._indexer;\r\n            result._index = this._index.clone();\r\n        }\r\n        return result;\r\n    }\r\n    remove(v) {\r\n        Arr.remove(this._array, v);\r\n        this.unindexEl(v);\r\n        return this;\r\n    }\r\n    removeFirst(fn) {\r\n        let result = this.removeAt(this.indexOf(fn));\r\n        this.unindexEl(result);\r\n        return result;\r\n    }\r\n    removeAt(n) {\r\n        let result = Arr.removeAt(this._array, n);\r\n        this.unindexEl(result);\r\n        return result;\r\n    }\r\n    forEach(fn, startIndex = 0) {\r\n        Arr.forEach(this._array, fn, startIndex);\r\n        return this;\r\n    }\r\n    forSome(filter, fn) {\r\n        Arr.forSome(this._array, filter, fn);\r\n        return this;\r\n    }\r\n    until(fnOrTest, fn, startIndex) {\r\n        Arr.until(this._array, fnOrTest, fn, startIndex);\r\n        return this;\r\n    }\r\n    reverseForEach(fn) {\r\n        Arr.reverseForEach(this._array, fn);\r\n        return this;\r\n    }\r\n    reverseUntil(fnOrTest, fn) {\r\n        Arr.reverseUntil(this._array, fnOrTest, fn);\r\n        return this;\r\n    }\r\n    some(fn) {\r\n        return Arr.some(this._array, fn);\r\n    }\r\n    all(fn) {\r\n        return Arr.all(this._array, fn);\r\n    }\r\n    indexOf(v) {\r\n        let result = -1;\r\n        if (isFunction(v)) {\r\n            result = Arr.indexOf(this._array, v);\r\n        }\r\n        else {\r\n            result = Arr.indexOfElement(this._array, v);\r\n        }\r\n        return result;\r\n    }\r\n    contains(v) {\r\n        let result = false;\r\n        if (isFunction(v)) {\r\n            result = this.find(v) !== undefined;\r\n        }\r\n        else {\r\n            if (this._indexer !== null) {\r\n                result = this._index.contains(this._indexer(v));\r\n            }\r\n            else {\r\n                result = Arr.indexOfElement(this._array, v) !== -1;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    reverse() {\r\n        Arr.reverse(this._array);\r\n        return this;\r\n    }\r\n    first(fn) {\r\n        let index = -1;\r\n        let result;\r\n        if (fn === undefined) {\r\n            index = 0;\r\n        }\r\n        else {\r\n            index = Arr.indexOf(this._array, fn);\r\n        }\r\n        return index === -1 ? undefined : this.get(index);\r\n    }\r\n    find(fn) {\r\n        return this.first(fn);\r\n    }\r\n    last() {\r\n        return this.length === 0 ? undefined : this.get(this.length - 1);\r\n    }\r\n    filter(fn) {\r\n        return this.create(Arr.filter(this._array, fn));\r\n    }\r\n    select(fn) {\r\n        return this.create(Arr.filter(this._array, fn));\r\n    }\r\n    selectInto(src, fn) {\r\n        let arr = src instanceof List ? src.values : src;\r\n        Arr.filterInto(arr, this._array, fn);\r\n        this.index(arr);\r\n        return this;\r\n    }\r\n    head(count = 1) {\r\n        count = Math.max(0, count);\r\n        return this.create(Arr.slice(this._array, 0, count));\r\n    }\r\n    tail(count = 1) {\r\n        count = Math.min(this._array.length, count);\r\n        return this.create(Arr.slice(this._array, Math.max(0, this._array.length - count)));\r\n    }\r\n    splice(pos = 0, remove = Infinity, insert = []) {\r\n        Arr.splice(this._array, pos, remove, isArray(insert) ? insert : insert.values);\r\n        this._reindex();\r\n        return this;\r\n    }\r\n    orderBy(fn) {\r\n        this._array.sort(fn);\r\n        return this;\r\n    }\r\n    map(fn) {\r\n        return this.create(Arr.map(this._array, fn));\r\n    }\r\n    mapInto(src, fn) {\r\n        let arr = src instanceof List ? src.values : src;\r\n        Arr.mapInto(arr, this._array, fn);\r\n        this._reindex();\r\n        return this;\r\n    }\r\n    reduce(fn, start) {\r\n        return Arr.reduce(this._array, fn, start);\r\n    }\r\n    reduceUntil(fn, test, start) {\r\n        return Arr.reduceUntil(this._array, fn, test, start);\r\n    }\r\n    reverseReduce(fn, start) {\r\n        return Arr.reverseReduce(this._array, fn, start);\r\n    }\r\n    reverseReduceUntil(fn, test, start) {\r\n        return Arr.reverseReduceUntil(this._array, fn, test, start);\r\n    }\r\n    equals(b) {\r\n        const result = equals(this._array, b.values);\r\n        return result;\r\n    }\r\n    same(b) {\r\n        let a = this;\r\n        let count = 0;\r\n        if (a.length === b.length) {\r\n            if (a.indexer !== null) {\r\n                b.until((el) => !a.contains(el), (el, i) => ++count);\r\n            }\r\n            else {\r\n                a.until((el) => !b.contains(el), (el, i) => ++count);\r\n            }\r\n        }\r\n        return count === a.length;\r\n    }\r\n    intersect(b) {\r\n        let result = this.create();\r\n        let long;\r\n        let short;\r\n        result.indexer = this.indexer;\r\n        if (this.length < b.length) {\r\n            short = this, long = b;\r\n        }\r\n        else {\r\n            long = this, short = b;\r\n        }\r\n        if (long.indexer !== null) {\r\n            short.forEach((el) => {\r\n                if (long.contains(el)) {\r\n                    result.push(el);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            long.forEach((el) => {\r\n                if (short.contains(el)) {\r\n                    result.push(el);\r\n                }\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    union(b) {\r\n        let result = this.create();\r\n        let long;\r\n        let short;\r\n        result.indexer = this.indexer;\r\n        if (this.length < b.length) {\r\n            short = this, long = b;\r\n        }\r\n        else {\r\n            long = this, short = b;\r\n        }\r\n        if (long.indexer !== null) {\r\n            result = long.clone();\r\n            short.forEach((el) => {\r\n                if (!long.contains(el)) {\r\n                    result.push(el);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            result = short.clone();\r\n            long.forEach((el) => {\r\n                if (!short.contains(el)) {\r\n                    result.push(el);\r\n                }\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    subtract(b) {\r\n        let result = this.create();\r\n        result.indexer = this.indexer;\r\n        result = this.select((el) => !b.contains(el));\r\n        return result;\r\n    }\r\n    zip(list, fn = (t, u) => [t, u]) {\r\n        let result = this.create();\r\n        let length = list.length;\r\n        this.until(function (el, i) {\r\n            return i >= length;\r\n        }, function (el, i) {\r\n            result.push(fn(el, list.get(i)));\r\n        });\r\n        return result;\r\n    }\r\n    unzip(fn = (el) => [el[0], el[1]]) {\r\n        let result = [this.create(), this.create()];\r\n        this.forEach(function (el) {\r\n            let tuple = fn(el);\r\n            result[0].push(tuple[0]);\r\n            result[1].push(tuple[1]);\r\n        });\r\n        return result;\r\n    }\r\n    flatten(maxDepth = Infinity) {\r\n        return this.create(maxDepth < 1 ? this.values : this._flattenInner(this.values, maxDepth));\r\n    }\r\n    _flattenInner(src, maxDepth, depth = -1, result = []) {\r\n        let i = -1;\r\n        const len = src.length;\r\n        if (++depth > maxDepth) {\r\n            result.push(src);\r\n        }\r\n        else {\r\n            while (++i < len) {\r\n                if (isArray(src[i])) {\r\n                    this._flattenInner(src[i], maxDepth, depth, result);\r\n                }\r\n                else if (src[i] instanceof List) {\r\n                    this._flattenInner(src[i].values, maxDepth, depth, result);\r\n                }\r\n                else {\r\n                    result.push(src[i]);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        return this.values;\r\n    }\r\n    serialize() {\r\n        return this.values.map((el) => isFunction(el.serialize) ? el.serialize() : el);\r\n    }\r\n    deserialize(array, ...types) {\r\n        Arr.deserialize(array, this._array, ...types);\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=List.js.map","class TimerState {\r\n}\r\nTimerState._hasPerformance = typeof (performance) !== \"undefined\";\r\nexport class Timer {\r\n    static get time() {\r\n        return TimerState._time;\r\n    }\r\n    static now() {\r\n        if (TimerState._hasPerformance) {\r\n            return performance.now();\r\n        }\r\n        else {\r\n            const hrTime = process.hrtime();\r\n            return hrTime[0] * 1000 + (hrTime[1] / 1e6);\r\n        }\r\n    }\r\n    static start() {\r\n        const now = Timer.now();\r\n        TimerState._start = TimerState._last = now;\r\n        return TimerState._time = 0;\r\n    }\r\n    static stop() {\r\n        const start = TimerState._start;\r\n        const now = Timer.now();\r\n        TimerState._last = now;\r\n        return TimerState._time = now - start;\r\n    }\r\n}\r\n//# sourceMappingURL=Timer.js.map","import { Global } from \"./Global\";\r\nimport { hasConsole, hasWindow, isNotUndefined } from \"./Test\";\r\nimport { Timer } from \"./Timer\";\r\nclass UtilState {\r\n}\r\nUtilState._int = 0;\r\nexport function init(win) {\r\n    if (win !== undefined) {\r\n        Global.window = win;\r\n    }\r\n}\r\nexport function getFunctionName(fn) {\r\n    let result;\r\n    if (fn.hasOwnProperty(\"name\") !== undefined) {\r\n        result = fn.name;\r\n    }\r\n    else {\r\n        const fnString = fn.toString();\r\n        result = fnString.substring(9, fnString.indexOf(\"(\"));\r\n    }\r\n    return result;\r\n}\r\nexport function getFunctionCode(fn) {\r\n    let result;\r\n    const fnString = fn.toString();\r\n    result = fnString.substring(fnString.indexOf(\"{\") + 1, fnString.lastIndexOf(\"}\"));\r\n    return result;\r\n}\r\nexport function newUUID() {\r\n    let d = new Date().getTime();\r\n    d += Timer.now();\r\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n        const r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\r\n    });\r\n}\r\nexport function newInt() {\r\n    return UtilState._int++;\r\n}\r\nexport function callDebugger() {\r\n    debugger;\r\n}\r\nexport function pipeOut(log, warn, error) {\r\n    if (hasConsole()) {\r\n        proxyFn(console, \"log\", function (superfn, ...args) { superfn(...args); log(...args); });\r\n        proxyFn(console, \"warn\", function (superfn, ...args) { superfn(...args); warn(...args); });\r\n        proxyFn(console, \"error\", function (superfn, ...args) { superfn(...args); error(...args); });\r\n    }\r\n    else {\r\n        const console = {\r\n            log,\r\n            warn,\r\n            error\r\n        };\r\n        if (!(hasWindow())) {\r\n            Global.window = {};\r\n        }\r\n        Global.window.console = console;\r\n    }\r\n}\r\nexport function assert(assertion, message, isDebug = true) {\r\n    let result = true;\r\n    if (!assertion) {\r\n        if (hasConsole) {\r\n            result = false;\r\n            console.error(\"Assertion failed: \" + message);\r\n        }\r\n        if (isDebug) {\r\n            callDebugger();\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function proxyFn(objOrClass, fnName, proxyFn) {\r\n    objOrClass = isNotUndefined(objOrClass.prototype) ? objOrClass.prototype : objOrClass;\r\n    const fn = objOrClass[fnName];\r\n    const _superFn = function (...args) {\r\n        if (args.length !== 0) {\r\n            return fn.apply(this || objOrClass, args);\r\n        }\r\n        else {\r\n            return fn.call(this || objOrClass);\r\n        }\r\n    };\r\n    objOrClass[fnName] = proxyFn.bind(objOrClass, _superFn);\r\n}\r\nexport function loop(count, fn) {\r\n    let i = -1;\r\n    while (++i < count) {\r\n        fn(i);\r\n    }\r\n}\r\nexport function toArray(arr) {\r\n    return Array.prototype.slice.call(arr);\r\n}\r\n//# sourceMappingURL=Util.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nimport { map } from \"../Arr\";\r\nimport { clone, isSameClass, setProperties } from \"../Obj\";\r\nimport { Initable } from \"../standard/mixins/Initable\";\r\nimport { isArray } from \"../Test\";\r\nimport { newUUID } from \"../Util\";\r\nimport { Dictionary } from \"./Dictionary\";\r\nimport { List } from \"./List\";\r\nimport { Stack } from \"./Stack\";\r\nlet Tree = Tree_1 = class Tree {\r\n    constructor() {\r\n        this.id = \"\";\r\n        this.parent = null;\r\n        this.children = null;\r\n        this.data = null;\r\n        this.virtual = false;\r\n        this.id = newUUID();\r\n    }\r\n    static fromObject(obj) {\r\n        const parent = (this instanceof Tree_1) ? this : null;\r\n        const root = new Tree_1().init({ id: obj.id || newUUID(), data: obj.data, parent });\r\n        if (obj.children !== undefined && isArray(obj.children)) {\r\n            root.children = new List(map(obj.children, Tree_1.fromObject.bind(root)));\r\n        }\r\n        return root;\r\n    }\r\n    static fromNodeList(nodes, mapcfg, virtualRoot = false) {\r\n        let result = new Tree_1();\r\n        let mapResolver = (key) => {\r\n            return !mapcfg || typeof (mapcfg[key]) === \"undefined\" ? (el) => el[key] :\r\n                typeof (mapcfg[key]) === \"string\" ? (el) => el[mapcfg[key]] :\r\n                    mapcfg[key];\r\n        };\r\n        let map = {\r\n            id: mapResolver(\"id\"),\r\n            parent: mapResolver(\"parent\"),\r\n            data: mapResolver(\"data\")\r\n        };\r\n        let list = new List(nodes);\r\n        let lookup = new Dictionary();\r\n        list.forEach((el, i) => {\r\n            let node = new Tree_1().init({ id: map.id(el), data: map.data(el) });\r\n            lookup.set(node.id, node);\r\n        });\r\n        let rootNodes = new List();\r\n        list.forEach((el, i) => {\r\n            let parent = map.parent(el);\r\n            if (lookup.contains(parent)) {\r\n                lookup.get(parent).add(lookup.get(map.id(el)));\r\n            }\r\n            else {\r\n                rootNodes.add(lookup.get(map.id(el)));\r\n            }\r\n        });\r\n        if (virtualRoot === false) {\r\n            result = rootNodes.first();\r\n        }\r\n        else {\r\n            result = new Tree_1().init({ id: newUUID(), virtual: true });\r\n            rootNodes.forEach((el) => result.add(el));\r\n        }\r\n        return result;\r\n    }\r\n    create() {\r\n        return new (this.constructor)();\r\n    }\r\n    init(obj) {\r\n        setProperties(this, obj);\r\n        return this;\r\n    }\r\n    insertAt(pos, data) {\r\n        if (this.children === null || this.children.count <= pos) {\r\n            this.add(data);\r\n        }\r\n        else {\r\n            this.children.insertAt(pos, this.create().init({ data, parent: this }));\r\n        }\r\n    }\r\n    add(data) {\r\n        if (this.children === null) {\r\n            this.children = new List();\r\n        }\r\n        if (isSameClass(data, this)) {\r\n            data.parent = this;\r\n            this.children.add(data);\r\n        }\r\n        else {\r\n            this.children.add((this.create()).init({ data: data, parent: this }));\r\n        }\r\n    }\r\n    remove() {\r\n        if (this.parent !== null) {\r\n            this.parent.children.remove(this);\r\n        }\r\n    }\r\n    prune() {\r\n        if (this.children !== null) {\r\n            this.children\r\n                .forEach(function (el, i) {\r\n                el.parent = null;\r\n            })\r\n                .clear();\r\n        }\r\n        this.children = null;\r\n        return this;\r\n    }\r\n    reduce(fn, start) {\r\n        const stack = new Stack();\r\n        let acc = start;\r\n        if (!fn) {\r\n            fn = (acc, cur) => (acc.push({ id: cur.id, parent: cur.parent ? cur.parent.id : null, data: cur.data }), acc);\r\n        }\r\n        if (start === undefined) {\r\n            acc = [];\r\n        }\r\n        let cur;\r\n        let i;\r\n        stack.push(this);\r\n        while (cur = stack.pop()) {\r\n            acc = fn(acc, cur);\r\n            i = (cur.children && cur.children.count) || 0;\r\n            while (i--) {\r\n                stack.push(cur.children.get(i));\r\n            }\r\n        }\r\n        return acc;\r\n    }\r\n    clone() {\r\n        const result = new this.constructor();\r\n        result.id = this.id;\r\n        result.parent = this.parent;\r\n        result.children = this.children === null ? null : this.children.clone();\r\n        result.data = this.data === null || this.data === undefined ? this.data : clone(this.data);\r\n        return result;\r\n    }\r\n    duplicateNode() {\r\n        const result = new this.constructor();\r\n        result.id = this.id;\r\n        result.parent = this.parent;\r\n        result.children = this.children;\r\n        result.data = this.data;\r\n        return result;\r\n    }\r\n    filter(condition) {\r\n        const root = this.duplicateNode();\r\n        const children = this.children;\r\n        if (children !== null) {\r\n            root.children =\r\n                root.children\r\n                    .select(condition)\r\n                    .map(function (el, i) {\r\n                    return el.filter(condition);\r\n                });\r\n        }\r\n        return root;\r\n    }\r\n    select(condition, acc = new List()) {\r\n        const result = acc;\r\n        const children = this.children;\r\n        if (condition === undefined || condition(this)) {\r\n            result.add(this);\r\n        }\r\n        if (children) {\r\n            children.reduce(function (acc, cur) {\r\n                return cur.select(condition, acc);\r\n            }, result);\r\n        }\r\n        return result;\r\n    }\r\n    find(condition) {\r\n        let result = null;\r\n        const children = this.children;\r\n        if (children !== null) {\r\n            let i = -1;\r\n            const len = this.children.count;\r\n            const val = this.children.values;\r\n            while (++i < len) {\r\n                if (condition(val[i].data)) {\r\n                    result = val[i];\r\n                    break;\r\n                }\r\n                else {\r\n                    result = val[i].children !== null ? val[i].find(condition) : null;\r\n                    if (result !== null) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    contains(condition) {\r\n        return this.find(condition) !== null;\r\n    }\r\n    depth() {\r\n        let result = 0;\r\n        let node = this;\r\n        while (node.parent) {\r\n            node = node.parent;\r\n            ++result;\r\n        }\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        let result = new List();\r\n        result.push({ id: this.id, data: this.data, parent: this.parent === null ? null : this.parent.id, children: this.children === null ? null : this.children.map((el) => el.id) });\r\n        if (this.children !== null) {\r\n            this.children.forEach((node) => result.append(node.toJSON()));\r\n        }\r\n        return result.toJSON();\r\n    }\r\n    serialize() {\r\n        let result = new List();\r\n        result.push({ id: this.id, data: this.data, parent: this.parent === null ? null : this.parent.id, children: this.children === null ? null : this.children.map((el) => el.id) });\r\n        if (this.children !== null) {\r\n            this.children.forEach((node) => result.append(node.serialize()));\r\n        }\r\n        return result.serialize();\r\n    }\r\n};\r\nTree = Tree_1 = __decorate([\r\n    Initable,\r\n    __metadata(\"design:paramtypes\", [])\r\n], Tree);\r\nexport { Tree };\r\nvar Tree_1;\r\n//# sourceMappingURL=Tree.js.map","import { deepCopy, slice, deserialize } from \"../Arr\";\r\nimport { isFunction } from \"../Test\";\r\nimport { List } from \"./List\";\r\nexport class Stack {\r\n    constructor(size) {\r\n        this.DEFAULT_SIZE = 100;\r\n        this._pos = 0;\r\n        this._limit = 0;\r\n        if (!size) {\r\n            size = this.DEFAULT_SIZE;\r\n        }\r\n        this.DEFAULT_SIZE = size;\r\n        this._array = new Array(size);\r\n        this.push = this.fastPush;\r\n    }\r\n    get values() {\r\n        return slice(this._array, 0, this._pos);\r\n    }\r\n    get depth() {\r\n        return this._pos;\r\n    }\r\n    get size() {\r\n        return this._pos;\r\n    }\r\n    get isEmpty() {\r\n        return this.size === 0;\r\n    }\r\n    get limit() {\r\n        return this._limit;\r\n    }\r\n    set limit(value) {\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n        this._limit = value;\r\n        if (value === 0) {\r\n            this.push = this.fastPush;\r\n        }\r\n        else {\r\n            this.push = this.limitedPush;\r\n            this.limitObjects();\r\n        }\r\n    }\r\n    create(size) {\r\n        return new (this.constructor)(size);\r\n    }\r\n    push(obj) {\r\n    }\r\n    fastPush(obj) {\r\n        this._array[this._pos++] = obj;\r\n    }\r\n    limitedPush(obj) {\r\n        this._array[this._pos] = obj;\r\n        ++this._pos;\r\n        this.limitObjects();\r\n    }\r\n    pop() {\r\n        let result = undefined;\r\n        if (this._pos !== 0) {\r\n            result = this._array[--this._pos];\r\n        }\r\n        return result;\r\n    }\r\n    peek() {\r\n        return this._array[this._pos - 1];\r\n    }\r\n    peekAt(index) {\r\n        return index < 0 || index >= this._pos ? undefined : this._array[this._pos - index - 1];\r\n    }\r\n    toList() {\r\n        const result = new List();\r\n        return new List(this.values);\r\n    }\r\n    clear() {\r\n        this._pos = 0;\r\n        this._array.length = this.DEFAULT_SIZE;\r\n        return this;\r\n    }\r\n    clone() {\r\n        const arr = deepCopy(this._array);\r\n        let result = this.create(this.DEFAULT_SIZE);\r\n        result._array = arr;\r\n        result._limit = this._limit;\r\n        result._pos = this._pos;\r\n        return result;\r\n    }\r\n    limitObjects() {\r\n        while (this._pos > this._limit) {\r\n            this._array.shift();\r\n            --this._pos;\r\n        }\r\n    }\r\n    toJSON() {\r\n        return slice(this.values, 0, this._pos);\r\n    }\r\n    serialize() {\r\n        return slice(this.values, 0, this._pos).map((el) => isFunction(el.serialize) ? el.serialize() : el);\r\n    }\r\n    deserialize(array, ...types) {\r\n        deserialize(array, this._array, ...types);\r\n        this._pos = array.length;\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Stack.js.map","import { Global } from \"./Global\";\r\nexport var Sides;\r\n(function (Sides) {\r\n    Sides[Sides[\"Top\"] = 0] = \"Top\";\r\n    Sides[Sides[\"Bottom\"] = 1] = \"Bottom\";\r\n    Sides[Sides[\"Left\"] = 2] = \"Left\";\r\n    Sides[Sides[\"Right\"] = 3] = \"Right\";\r\n})(Sides || (Sides = {}));\r\nclass DomState {\r\n}\r\nDomState.Sides = Sides;\r\nDomState._window = Global.window;\r\nDomState._document = Global.window ? Global.window.document : undefined;\r\nDomState._el = Global.window ? Global.window.document.createElement(\"div\") : undefined;\r\nexport function init(win) {\r\n    Global.window = win;\r\n    DomState._window = Global.window;\r\n    DomState._document = DomState._window.document;\r\n    DomState._el = DomState._document.createElement(\"div\");\r\n}\r\nexport function toArray(a) {\r\n    return Array.prototype.slice.call(a);\r\n}\r\nexport function create(html, attr) {\r\n    let result, keys, i, k, styles, styleKeys;\r\n    DomState._el.innerHTML = html;\r\n    result = DomState._el.children[0];\r\n    setAttr(result, attr);\r\n    clear(DomState._el);\r\n    return result;\r\n}\r\nexport function outerHTML(el) {\r\n    DomState._el.appendChild(el);\r\n    const result = DomState._el.innerHTML;\r\n    clear(DomState._el);\r\n    return result;\r\n}\r\nexport function setAttr(_el, attr) {\r\n    let el;\r\n    if (typeof (_el) === \"string\") {\r\n        el = get(_el);\r\n    }\r\n    else {\r\n        el = _el;\r\n    }\r\n    let keys, i, k, styles, styleKeys, style;\r\n    if (attr !== undefined && typeof (attr) === \"object\") {\r\n        keys = Object.keys(attr);\r\n        for (i = 0; i < keys.length; i++) {\r\n            if (keys[i] === \"style\") {\r\n                styles = attr[keys[i]];\r\n                styleKeys = Object.keys(styles);\r\n                for (k = 0; k < styleKeys.length; k++) {\r\n                    style = styles[styleKeys[k]];\r\n                    if (typeof (style) === \"string\") {\r\n                        el.style.setProperty(styleKeys[k], style);\r\n                    }\r\n                    else {\r\n                        el.style.setProperty(styleKeys[k], style[0], style[1]);\r\n                    }\r\n                }\r\n            }\r\n            else if (keys[i] === \"classes\" && attr[keys[i]] !== undefined && attr[keys[i]].join) {\r\n                el.setAttribute(\"className\", attr[keys[i]].join(\" \"));\r\n            }\r\n            else {\r\n                el.setAttribute(keys[i], attr[keys[i]]);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function remove(element) {\r\n    return element.parentNode === undefined ? null : element.parentNode.removeChild(element);\r\n}\r\nexport function replace(src, target) {\r\n    let result = target;\r\n    if (src.parentNode) {\r\n        src.parentNode.replaceChild(target, src);\r\n    }\r\n    return result;\r\n}\r\nexport function clear(element) {\r\n    let i = element.children.length;\r\n    while (i--) {\r\n        element.removeChild(element.children[i]);\r\n    }\r\n}\r\nexport function get(id) {\r\n    let result = DomState._document.getElementById(id);\r\n    if (result === null) {\r\n        switch (id) {\r\n            default:\r\n                result = DomState._document.body;\r\n                break;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function find(selector) {\r\n    return DomState._document.querySelector(selector);\r\n}\r\nexport function findAll(selector, root) {\r\n    return toArray((root || DomState._document).querySelectorAll(selector));\r\n}\r\nexport function children(root, selector) {\r\n    const children = toArray((root || DomState._document).children);\r\n    return selector === undefined ? children : children.filter(is.bind(this, selector));\r\n}\r\nexport function findParent(root, selector) {\r\n    let result = root.parentElement;\r\n    while (result) {\r\n        if (is(selector, result)) {\r\n            break;\r\n        }\r\n        result = result.parentElement;\r\n    }\r\n    return result;\r\n}\r\nexport function position(el, x, y) {\r\n    el.style.top = y + \"px\";\r\n    el.style.left = x + \"px\";\r\n}\r\nexport function is(selector, element) {\r\n    let result = false;\r\n    if (element.matches) {\r\n        result = element.matches(selector);\r\n    }\r\n    else if (element.msMatchesSelector) {\r\n        result = element.msMatchesSelector(selector);\r\n    }\r\n    else if (element.webkitMatchesSelector) {\r\n        result = element.webkitMatchesSelector(selector);\r\n    }\r\n    else {\r\n        if (element.parentElement === null) {\r\n            throw new Error(\"Element has no parent\");\r\n        }\r\n        if (element.id !== \"\") {\r\n            result = element.parentElement.querySelector(\"#\" + element.id) !== null;\r\n        }\r\n        else {\r\n            result = toArray(element.parentElement.querySelectorAll(selector)).indexOf(element) !== -1;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function setStylesExplicitly(element, ...styles) {\r\n    const comp = DomState._window.getComputedStyle(element);\r\n    for (const style of styles) {\r\n        element.style[style] = comp[style];\r\n    }\r\n}\r\n//# sourceMappingURL=Dom.js.map","export var MocDataType;\r\n(function (MocDataType) {\r\n    MocDataType[MocDataType[\"LinearInt\"] = 0] = \"LinearInt\";\r\n    MocDataType[MocDataType[\"RandomInt\"] = 1] = \"RandomInt\";\r\n    MocDataType[MocDataType[\"LinearFloat\"] = 2] = \"LinearFloat\";\r\n    MocDataType[MocDataType[\"RandomFloat\"] = 3] = \"RandomFloat\";\r\n})(MocDataType || (MocDataType = {}));\r\nexport const VALID_CHARS = \" ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\nexport function randomString(length = 25) {\r\n    let result = \"\";\r\n    for (let i = 0; i < length; i += 1) {\r\n        result += VALID_CHARS.charAt(Math.floor(Math.random() * VALID_CHARS.length));\r\n    }\r\n    return result;\r\n}\r\nexport function randomInt() {\r\n    return this.randomNumber() | 0;\r\n}\r\nexport function randomNumber() {\r\n    return Math.random() * 2147483647;\r\n}\r\nexport function numericArray(length, type = MocDataType.LinearInt) {\r\n    const result = new Array(length);\r\n    switch (type) {\r\n        case MocDataType.RandomInt:\r\n            for (let i = 0; i < length; i += 1) {\r\n                result[i] = this.randomInt();\r\n            }\r\n            break;\r\n        case MocDataType.LinearFloat:\r\n            for (let i = 0; i < length; i += 1) {\r\n                result[i] = i + 0.5;\r\n            }\r\n            break;\r\n        case MocDataType.RandomFloat:\r\n            for (let i = 0; i < length; i += 1) {\r\n                result[i] = this.randomNumber();\r\n            }\r\n            break;\r\n        default:\r\n            for (let i = 0; i < length; i += 1) {\r\n                result[i] = i;\r\n            }\r\n            break;\r\n    }\r\n    return result;\r\n}\r\nexport function stringArray(arrayLength, stringLength) {\r\n    const result = new Array(arrayLength);\r\n    let i = -1;\r\n    while (++i < arrayLength) {\r\n        result[i] = this.randomString(stringLength);\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=MocData.js.map","import { setProperties } from \"../../Obj\";\r\nexport function Initable(constructor) {\r\n    return class extends constructor {\r\n        init(obj, mapping) {\r\n            setProperties(this, obj, mapping);\r\n            return this;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=Initable.js.map","import { Arr, Dictionary, Dom, Vec2, Timer } from \"goodcore\";\nvar GoodTap = (function () {\n    function GoodTap(rootElement) {\n        this.minSwipeDistance = 100;\n        this.events = [\"down\", \"up\", \"press\", \"tap\", \"swipe\"];\n        this.downEvents = [\"down\"];\n        this.upEvents = [\"up\", \"tap\", \"swipe\"];\n        this.longPressIntervals = new Dictionary();\n        this.eventAttr = \"\";\n        this.upEventsAndPress = [];\n        this.index = 0;\n        this.init(rootElement || document.body);\n        this.eventAttr = this.events.map(function (name) { return \"[\" + name + \"]\"; }).join(\",\");\n        this.upEventsAndPress = this.upEvents.concat([\"press\"]);\n    }\n    GoodTap.prototype.init = function (rootElement) {\n        var _this = this;\n        if (GoodTap.hasTouchEvent()) {\n            rootElement.addEventListener(\"touchInfo\", function (ev) { _this.begin(ev); });\n            rootElement.addEventListener(\"touchend\", function (ev) { _this.end(ev); });\n        }\n        rootElement.addEventListener(\"mousedown\", function (ev) { _this.begin(ev); });\n        rootElement.addEventListener(\"mouseup\", function (ev) { _this.end(ev); });\n    };\n    GoodTap.prototype.findTarget = function (el) {\n        var target = null;\n        while (el && el.parentElement !== document && target === null) {\n            if (Dom.is(this.eventAttr, el)) {\n                target = el;\n            }\n            el = el.parentElement;\n        }\n        return target;\n    };\n    GoodTap.prototype.getTouchPos = function (ev) {\n        var pos = new Vec2(0, 0);\n        if (ev instanceof TouchEvent) {\n            pos = new Vec2(ev.changedTouches[0].pageX, ev.changedTouches[0].pageY);\n        }\n        else if (ev instanceof MouseEvent) {\n            pos = new Vec2(ev.pageX, ev.pageY);\n        }\n        return pos;\n    };\n    GoodTap.prototype.longPress = function (ev, target) {\n        var result = true;\n        var touchInfo = target.touchInfo;\n        result = this.executeAction(ev, target, \"press\", touchInfo);\n        if (result === false || target.hasAttribute(\"once\")) {\n            clearInterval(this.longPressIntervals.get(touchInfo.index));\n            this.longPressIntervals.delete(touchInfo.index);\n        }\n    };\n    GoodTap.prototype.begin = function (ev) {\n        var _this = this;\n        this.longPressIntervals.list.forEach(function (long) { return clearInterval(long); });\n        this.longPressIntervals.clear();\n        var stopPropagation = false;\n        var target = ev.target;\n        var loopCounter = 0;\n        while (loopCounter < 100 && (target = this.findTarget(target)) && !stopPropagation) {\n            ++loopCounter;\n            var pressInterval = null;\n            if (target.hasAttribute(\"press\")) {\n                pressInterval = setInterval((function (target) { return _this.longPress(ev, target); }).bind(this, target), parseInt(target.getAttribute(\"pressInterval\")) || 500);\n            }\n            target.classList.add(\"gt-active\");\n            target.touchInfo = {\n                index: this.index++,\n                time: Timer.now(),\n                pos: this.getTouchPos(ev),\n                long: pressInterval\n            };\n            if (pressInterval) {\n                this.longPressIntervals.set(target.touchInfo.index, target.touchInfo.long);\n            }\n            Arr.until(this.downEvents, function (name) {\n                if (target.hasAttribute(name)) {\n                    stopPropagation = (_this.handleEvent(name, ev, target) === false);\n                    if (!stopPropagation && target.hasAttribute(\"stopPropagation\") && target.hasAttribute(\"gt-false\")) {\n                        stopPropagation = true;\n                        ev.stopPropagation();\n                    }\n                    if (target.hasAttribute(\"preventDefault\") && target.hasAttribute(\"gt-false\")) {\n                        ev.preventDefault();\n                    }\n                }\n                return stopPropagation;\n            });\n            target = target.parentElement;\n        }\n    };\n    GoodTap.prototype.isSwipe = function (ev, target) {\n        var pos = this.getTouchPos(ev);\n        var result = false;\n        if (\"touchInfo\" in target) {\n            var dX = pos.x - target.touchInfo.pos.x;\n            var dY = pos.y - target.touchInfo.pos.y;\n            var absDX = Math.abs(dX);\n            var absDY = Math.abs(dY);\n            var horizontal = absDX > absDY;\n            var distance = horizontal ? absDX : absDY;\n            result = distance >= this.minSwipeDistance;\n            if (result) {\n                target.touchInfo.swipeInfo = {\n                    direction: horizontal ?\n                        (dX < 0 ? \"left\" : \"right\") :\n                        (dY < 0 ? \"up\" : \"down\"),\n                    distance: distance,\n                    delta: new Vec2(dX, dY)\n                };\n            }\n        }\n        return result;\n    };\n    GoodTap.prototype.end = function (ev) {\n        var _this = this;\n        var time = Timer.now();\n        var stopPropagation = false;\n        var target = ev.target;\n        var loopCounter = 0;\n        while (loopCounter < 100 && (target = this.findTarget(target)) && !stopPropagation) {\n            ++loopCounter;\n            var touchInfo = target.touchInfo;\n            var endedOutsideOrMultiTouch = touchInfo === undefined;\n            if (endedOutsideOrMultiTouch && this.longPressIntervals.has(touchInfo.index)) {\n                target.classList.remove(\"gt-active\");\n                clearInterval(this.longPressIntervals.get(touchInfo.index));\n                delete target.touchInfo;\n            }\n            else {\n                Arr.until(this.upEventsAndPress, function (name) {\n                    if (target.hasAttribute(name)) {\n                        var isSwipe = _this.isSwipe(ev, target);\n                        if (name === \"swipe\" && isSwipe\n                            || name === \"tap\" && !isSwipe\n                            || name === \"up\") {\n                            stopPropagation = (_this.handleEvent(name, ev, target) === false);\n                        }\n                        if (stopPropagation || target.hasAttribute(\"stopPropagation\") && target.hasAttribute(\"gt-false\")) {\n                            stopPropagation = true;\n                            ev.stopPropagation();\n                            delete target.touchInfo;\n                        }\n                        if (target.hasAttribute(\"preventDefault\") && target.hasAttribute(\"gt-false\")) {\n                            ev.preventDefault();\n                        }\n                    }\n                    return stopPropagation;\n                });\n            }\n            target = target.parentElement;\n        }\n        Dom.findAll(\".gt-active\").forEach(function (el) {\n            el.classList.remove(\"gt-active\");\n            delete el.touchInfo;\n        });\n        this.longPressIntervals.list.forEach(function (long) { return clearInterval(long); });\n        this.longPressIntervals.clear();\n    };\n    GoodTap.prototype.executeAction = function (ev, target, actionAttr, touchInfo) {\n        var result = true;\n        var action = target.getAttribute(actionAttr);\n        try {\n            if (action === \"[fn]\" && (actionAttr + \"-fn\") in target) {\n                result = target[actionAttr + \"-fn\"](ev, target, touchInfo);\n            }\n            else {\n                result = (new Function(\"event\", \"target\", \"touch\", action)).bind(target)(ev, target, touchInfo);\n            }\n        }\n        catch (err) {\n            throw name + \" event function error on element '\" + target.id + \"'\";\n        }\n        return result;\n    };\n    GoodTap.prototype.handleEvent = function (name, ev, target) {\n        var actionAttr = name;\n        var result = true;\n        if (target) {\n            result = this.executeAction(ev, target, actionAttr, target.touchInfo);\n            if (name in this.upEvents) {\n                target.classList.remove(\"gt-active\");\n                if (this.longPressIntervals.has(target.touchInfo.index)) {\n                    clearInterval(this.longPressIntervals.get(target.touchInfo.index));\n                }\n                delete target.touchInfo;\n            }\n        }\n        return result;\n    };\n    GoodTap.prototype.on = function (element, name, fn) {\n        element.setAttribute(name, \"[fn]\");\n        element[name + \"-fn\"] = fn;\n    };\n    GoodTap.prototype.off = function (element, name) {\n        element.removeAttribute(name + \"-action\");\n        delete element[name + \"-fn\"];\n    };\n    GoodTap.hideKeyboard = function () {\n        var field = document.createElement(\"input\");\n        field.setAttribute(\"type\", \"text\");\n        document.body.appendChild(field);\n        setTimeout(function () {\n            field.focus();\n            setTimeout(function () {\n                field.setAttribute(\"style\", \"display:none;\");\n                field.parentElement.removeChild(field);\n            }, 50);\n        }, 50);\n    };\n    GoodTap.hasTouchEvent = function () {\n        return \"ontouchInfo\" in document.documentElement;\n    };\n    return GoodTap;\n}());\nexport { GoodTap };\nexport function init(root) {\n    return new GoodTap(root);\n}\n//# sourceMappingURL=index.js.map"],"names":["CalcConst","ROTATION_DEGREE_PRECISION","RADIAN_FACTOR","Math","PI","DEGREE_FACTOR","DEG360","ROTATION_LOOKUP","lookup","i","push","cos","sin","Vec2Const","EPSILON","IDENTITY","x","y","X_DIM","Y_DIM","Vec2","[object Object]","this","angle","horizontalAngle","direction","isZero","src","out","set","create","ceil","sqrt","lengthSq","atan2","rot","rotation","deg","rotationDeg","rotationRad","nx","ny","center","subtract","rotate","add","len","length","vectorB","scalar","target","abs","isNormalized","result","clone","normalize","temp","coeff","v","max","min","nativeWindow","win","window","Global","_window","_nativeWindow","hasNativeWindow","isArray","it","Array","Object","prototype","toString","call","isFunction","isNullOrUndefined","arg","undefined","isUndefined","isNotUndefined","isSameClass","a","b","args","areNullOrUndefined","areNotNullOrUndefined","constructor","obj","deepCopy","Date","getTime","RegExp","keys","key","setProperties","values","mapping","value","slice","from","count","Infinity","removeAt","arr","index","indexOfElement","el","indexOf","fn","shallowCopy","deepCopyInto","filter","map","mapInto","forEach","startIndex","until","fnOrTest","isCombined","populator","deserialize","array","types","T","passthroughT","newT","Dictionary","_lookup","_list","List","_isDirty","has","wipe","clear","cleanList","list","reCreateList","get","serialize","_array","_index","_indexer","Arr.shallowCopy","pos","Error","indexer","_reindex","size","Arr.create","unshift","Arr.insertAt","pop","delete","shift","arr2","arrs","concat","apply","Arr.concat","Arr.forEach","offset","Arr.append","Arr.deepCopyInto","Arr.shallowCopyInto","Arr.deepCopy","unindexEl","n","Arr.removeAt","Arr.forSome","Arr.until","Arr.reverseForEach","combined","Arr.reverseUntil","Arr.some","Arr.all","Arr.indexOf","Arr.indexOfElement","find","contains","left","right","temporary","Arr.reverse","first","Arr.filter","j","space","Arr.filterInto","Arr.slice","remove","insert","srcLen","insertLen","newLen","delta","Arr.splice","sort","Arr.map","Arr.mapInto","start","acc","Arr.reduce","test","Arr.reduceUntil","Arr.reverseReduce","Arr.reverseReduceUntil","equals","long","short","select","t","u","tuple","maxDepth","_flattenInner","depth","Arr.deserialize","TimerState","_hasPerformance","Timer","time","_time","performance","now","hrTime","process","hrtime","_start","_last","newUUID","d","replace","c","r","random","floor","Tree","Tree_1","id","parent","children","data","virtual","root","init","fromObject","bind","nodes","mapcfg","virtualRoot","mapResolver","node","rootNodes","insertAt","stack","DEFAULT_SIZE","_pos","_limit","fastPush","isEmpty","limit","limitedPush","limitObjects","cur","condition","duplicateNode","reduce","val","append","toJSON","Sides","MocDataType","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__decorate","k","metadata","__metadata","DomState","toArray","is","selector","element","matches","msMatchesSelector","webkitMatchesSelector","parentElement","querySelector","querySelectorAll","_document","document","_el","createElement","GoodTap","rootElement","minSwipeDistance","events","downEvents","upEvents","longPressIntervals","eventAttr","upEventsAndPress","body","name","join","_this","hasTouchEvent","addEventListener","ev","begin","end","findTarget","Dom.is","getTouchPos","TouchEvent","changedTouches","pageX","pageY","MouseEvent","longPress","touchInfo","executeAction","hasAttribute","clearInterval","stopPropagation","loopCounter","pressInterval","setInterval","parseInt","getAttribute","classList","handleEvent","preventDefault","isSwipe","dX","dY","absDX","absDY","horizontal","distance","swipeInfo","actionAttr","action","Function","err","on","setAttribute","off","removeAttribute","hideKeyboard","field","appendChild","setTimeout","focus","removeChild","documentElement"],"mappings":"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"}